!function(e){function t(t){for(var n,i,l=t[0],c=t[1],s=t[2],d=0,m=[];d<l.length;d++)i=l[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(u&&u(t);m.length;)m.shift()();return o.push.apply(o,s||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,l=1;l<a.length;l++){var c=a[l];0!==r[c]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={0:0},o=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var u=c;o.push([0,1]),a()}({0:function(e,t,a){a("jI5P"),e.exports=a("nXPL")},1:function(e,t){},2:function(e,t){},"2maa":function(e){e.exports=JSON.parse('{"Layout":{"onboardImportText":"Import your school data","importFromButton":"Import from","exploreServices":"Explore services"},"Sidebar":{"timetable":"Timetable","homeworks":"Homeworks","grades":"Grades","presence":"Attendance","documents":"Documents"},"Timetable":{"title":"Timetable","to":"to","start":"Start","end":"End","location":"Location","teacher":"Teacher","status":"Status","duration":"Duration","informations":"Informations","noCourses":"No courses","cancelled":"Cancelled course","pauseNoCourses":"No lessons","pauseMidday":"Midday break","during":"during"},"Homeworks":{"title":"Homeworks","emptyList":{"title":"No homeworks found","description":"There are no homeworks saved in your account"},"loadMore":"Load more homeworks"},"Grades":{"title":"Grades","dialogContext":"Informations","date":"Date","valuesList":"Results and averages","emptyList":{"title":"No grades","description":"You don\'t have any grades for this period","periods":"No available period"},"selectPeriod":"Select a period","selectYear":"Select a year","values":{"student":{"title":"Student\'s grade","description":"Grade you got for this subject"},"class":{"title":"Class average","description":"Class average for this subject"},"max":{"title":"Class best grade","description":"Best grade of the class for this subject"},"min":{"title":"Class worst grade","description":"Worst grade of the class for this subject"},"coefficient":{"title":"Coefficient","description":"Weight of this grade in your overall average"}}},"Presence":{"title":"Attendance","delay":"Delay","absence":"Absence","presence":"Event","justified":"Justified","notJustified":"Not justified","justifiedUnreceivable":"Justified (unreceivable)","emptyList":{"title":"No attendance events","description":"You don\'t have any attendance events"}}}')},"5z4W":function(e,t){e.exports={name:"Papillon",slug:"papillon",version:"1.2.0",type:"webapp",icon:"icon.svg",categories:["others"],source:"https://github.com/cozy/cozy-papillon",editor:"Cozy",developer:{name:"Cozy Cloud",url:"https://cozy.io"},licence:"AGPL-3.0",routes:{"/":{folder:"/",index:"index.html",public:!1}},locales:{en:{short_description:"Visualize all your school data",long_description:"This application allows you to view data from your school life tools (such as Pronote).\n\n<br>This data is secure and visible only to you, just like all your Cozy data.\n\n<br>The data is presented in 4 groups:\n\nüìÜ Schedule\n\n‚úÖ Homework\n\nüìâ Grades\n\nüö∂‚Äç‚û°Ô∏è School life\n\n<br>It can be imported automatically every day through the Pronote Connector or Ecole Directe (currently in development).\n\n<br>Note: Files such as your homework, submitted assignments, term reports, etc., are archived and accessible through the Drive application of your Cozy."},fr:{short_description:"Visualisez l'ensemble de vos donn√©es scolaires.",long_description:"Cette application vous permet de visualiser les donn√©es issues de vos outils de vie scolaire (Pronote par exemple).\n\n<br>Ces donn√©es y sont s√©curis√©es et visibles seulement par vous-m√™me, comme toutes les donn√©es de votre Cozy.\n\n<br>Les donn√©es sont pr√©sent√©es en 4 groupes :\n\n- üìÜ Emploi du temps\n\n- ‚úÖ Travail √† faire\n\n- üìâ Notes\n\n- üö∂‚Äç‚û°Ô∏è Vie scolaire\n\n<br>Elles peuvent y √™tre import√©es chaque jour automatiquement par le Connecteur Pronote ou Ecole directe (en cours de d√©veloppement).\n\n<br>Note : les fichiers de vos devoirs, travaux rendus, bulletins trimestriels, etc. sont eux archiv√©s et utilisables gr√¢ce √† l'application Drive de votre Cozy."}},screenshots:["screenshots/fr/screenshot01.png"],langs:["en","fr"],permissions:{apps:{description:"Required by the cozy-bar to display the icons of the apps",type:"io.cozy.apps",verbs:["GET"]},files:{type:"io.cozy.files",description:"Required by Papillon",verbs:["GET"]},calendar:{type:"io.cozy.calendar.*",description:"Required by Papillon",verbs:["GET"]},grades:{type:"io.cozy.timeseries.grades",description:"Required by Papillon",verbs:["GET"]},accounts:{type:"io.cozy.accounts",description:"Required by Papillon",verbs:["GET"]},identities:{type:"io.cozy.identities",description:"Required by Papillon",verbs:["GET"]},triggers:{type:"io.cozy.triggers",description:"Required by Papillon",verbs:["GET"]}}}},"7SaY":function(e,t,a){},"7z1u":function(e,t,a){var n={"./_lib/build_formatting_tokens_reg_exp/index.js":"5XOE","./ar/build_distance_in_words_locale/index.js":"qs6D","./ar/build_format_locale/index.js":"80pQ","./ar/index.js":"n4NV","./be/build_distance_in_words_locale/index.js":"b7Vp","./be/build_format_locale/index.js":"STnx","./be/index.js":"ka/z","./bg/build_distance_in_words_locale/index.js":"fyh8","./bg/build_format_locale/index.js":"STBG","./bg/index.js":"BBHR","./ca/build_distance_in_words_locale/index.js":"4d8B","./ca/build_format_locale/index.js":"a88X","./ca/index.js":"Nz94","./cs/build_distance_in_words_locale/index.js":"70Ht","./cs/build_format_locale/index.js":"R/Ak","./cs/index.js":"oAfY","./da/build_distance_in_words_locale/index.js":"HjC7","./da/build_format_locale/index.js":"G0Zw","./da/index.js":"CJpN","./de/build_distance_in_words_locale/index.js":"DD2N","./de/build_format_locale/index.js":"pnJo","./de/index.js":"eBmD","./el/build_distance_in_words_locale/index.js":"tFqT","./el/build_format_locale/index.js":"twcE","./el/index.js":"m1rb","./en/build_distance_in_words_locale/index.js":"bjbr","./en/build_format_locale/index.js":"EW2Y","./en/index.js":"VkMk","./eo/build_distance_in_words_locale/index.js":"ujJO","./eo/build_format_locale/index.js":"S5Gq","./eo/index.js":"nn7U","./es/build_distance_in_words_locale/index.js":"h+mB","./es/build_format_locale/index.js":"Q4jc","./es/index.js":"4yJR","./fi/build_distance_in_words_locale/index.js":"Fpie","./fi/build_format_locale/index.js":"LTnX","./fi/index.js":"G/Qn","./fil/build_distance_in_words_locale/index.js":"VRy5","./fil/build_format_locale/index.js":"syEd","./fil/index.js":"k8V/","./fr/build_distance_in_words_locale/index.js":"nJeE","./fr/build_format_locale/index.js":"DeP4","./fr/index.js":"+owv","./hr/build_distance_in_words_locale/index.js":"Fs/O","./hr/build_format_locale/index.js":"ZlNX","./hr/index.js":"Kj+b","./hu/build_distance_in_words_locale/index.js":"8okG","./hu/build_format_locale/index.js":"lk8B","./hu/index.js":"+KHA","./id/build_distance_in_words_locale/index.js":"50BR","./id/build_format_locale/index.js":"18Vb","./id/index.js":"anKN","./is/build_distance_in_words_locale/index.js":"qUeK","./is/build_format_locale/index.js":"IcCt","./is/index.js":"4QE/","./it/build_distance_in_words_locale/index.js":"PCcA","./it/build_format_locale/index.js":"V71f","./it/index.js":"qK4z","./ja/build_distance_in_words_locale/index.js":"5vSx","./ja/build_format_locale/index.js":"CAsz","./ja/index.js":"XcQu","./ko/build_distance_in_words_locale/index.js":"jKsw","./ko/build_format_locale/index.js":"UEmh","./ko/index.js":"zOJj","./mk/build_distance_in_words_locale/index.js":"fcCd","./mk/build_format_locale/index.js":"re9F","./mk/index.js":"FDmM","./nb/build_distance_in_words_locale/index.js":"aEqN","./nb/build_format_locale/index.js":"pNMw","./nb/index.js":"mR4k","./nl/build_distance_in_words_locale/index.js":"7u2d","./nl/build_format_locale/index.js":"3riD","./nl/index.js":"06P9","./pl/build_distance_in_words_locale/index.js":"rygU","./pl/build_format_locale/index.js":"july","./pl/index.js":"vOlg","./pt/build_distance_in_words_locale/index.js":"sLR+","./pt/build_format_locale/index.js":"ZP65","./pt/index.js":"vSZg","./ro/build_distance_in_words_locale/index.js":"eJyG","./ro/build_format_locale/index.js":"fLwW","./ro/index.js":"OuEP","./ru/build_distance_in_words_locale/index.js":"KjgK","./ru/build_format_locale/index.js":"Tqgg","./ru/index.js":"T3Gn","./sk/build_distance_in_words_locale/index.js":"38t1","./sk/build_format_locale/index.js":"myxh","./sk/index.js":"In70","./sl/build_distance_in_words_locale/index.js":"Mhi5","./sl/build_format_locale/index.js":"yfgk","./sl/index.js":"D9r0","./sr/build_distance_in_words_locale/index.js":"I8h+","./sr/build_format_locale/index.js":"0FXG","./sr/index.js":"lQaB","./sv/build_distance_in_words_locale/index.js":"z6xu","./sv/build_format_locale/index.js":"jmSq","./sv/index.js":"SMJc","./th/build_distance_in_words_locale/index.js":"qHE1","./th/build_format_locale/index.js":"+W4l","./th/index.js":"5DsP","./tr/build_distance_in_words_locale/index.js":"0z6Z","./tr/build_format_locale/index.js":"NK/q","./tr/index.js":"OevD","./zh_cn/build_distance_in_words_locale/index.js":"SBqD","./zh_cn/build_format_locale/index.js":"219J","./zh_cn/index.js":"QhI5","./zh_tw/build_distance_in_words_locale/index.js":"7Fp2","./zh_tw/build_format_locale/index.js":"l09L","./zh_tw/index.js":"TDp1"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="7z1u"},Hsuv:function(e){e.exports=JSON.parse('{"Layout":{"onboardImportText":"Importez vos donn√©es scolaires","importFromButton":"Importer depuis","exploreServices":"Explorer les services"},"Sidebar":{"timetable":"Emploi du temps","homeworks":"Travail √† faire","grades":"Notes","presence":"Vie scolaire","documents":"Documents"},"Timetable":{"title":"Emploi du temps","to":"au","start":"D√©but","end":"Fin","location":"Lieu","teacher":"Professeur","status":"Statut","duration":"Dur√©e","informations":"Informations","noCourses":"Aucun cours","cancelled":"Cours annul√©","pauseNoCourses":"Pas de cours","pauseMidday":"Pause m√©ridienne","during":"pendant"},"Homeworks":{"title":"Travail √† faire","emptyList":{"title":"Aucun devoir","description":"Il n\'y a pas de devoirs sauvegard√©s dans votre compte"},"loadMore":"Charger plus de devoirs"},"Grades":{"title":"Notes","dialogContext":"Informations","date":"Date","valuesList":"R√©sultats et moyennes","emptyList":{"title":"Aucune note disponible","description":"Vous n\'avez pas de notes pour cette p√©riode","periods":"Aucune p√©riode disponible"},"selectPeriod":"S√©lectionner une p√©riode","selectYear":"S√©lectionner une ann√©e","values":{"student":{"title":"Note de l\'√©l√®ve","description":"Votre note obtenue pour ce sujet"},"class":{"title":"Moyenne de la classe","description":"La moyenne de la classe pour ce sujet"},"max":{"title":"Note haute de la classe","description":"La meilleure note de la classe pour ce sujet"},"min":{"title":"Note basse de la classe","description":"La moins bonne note de la classe pour ce sujet"},"coefficient":{"title":"Coefficient","description":"Poids de cette note dans le calcul de la moyenne g√©n√©rale"}}},"Presence":{"title":"Vie scolaire","delay":"Retard","absence":"Absence","presence":"√âv√®nement","justified":"Justifi√©(e)","notJustified":"Injustifi√©(e)","justifiedUnreceivable":"Motif non valable","emptyList":{"title":"Aucun √©venement","description":"Vous n\'avez pas d\'√©venements de vie scolaire"}}}')},eUFy:function(e,t,a){var n={"./en":"2maa","./en.json":"2maa","./fr":"Hsuv","./fr.json":"Hsuv"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="eUFy"},nXPL:function(e,t,a){"use strict";a.r(t);a("k37E"),a("QLHQ"),a("oULE"),a("7SaY");var n=a("ivGQ"),r=a.n(n),o=a("p/pw"),i=a("xEu0"),l=a.n(i),c=a("HROS"),s=a("vTbG"),u=a("Rx+m"),d=a("5LIP"),m=a("Aaol"),f=a("0Lot"),p=a("BqmN"),b=a("XkwL"),y=a.n(b),g=l.a.fetchPolicies.olderThan(54e4),v=function(e){return{definition:function(){return Object(i.Q)("io.cozy.triggers").where({message:{account:e,konnector:"pronote"}}).partialIndex({message:{account:e,konnector:"pronote"}})},options:{as:"io.cozy.triggers/konnector/pronote/account/"+e,fetchPolicy:g}}},h=Object(n.createContext)(),j=function(){return r.a.useContext(h)},E=function(e){var t=e.children,a=Object(n.useState)(null),o=y()(a,2),l=o[0],c=o[1],s={definition:function(){return Object(i.Q)("io.cozy.identities").where({cozyMetadata:{createdByApp:"pronote"}}).indexFields(["cozyMetadata.createdByApp"])},options:{as:"io.cozy.identities/pronote",fetchPolicy:g}},u=Object(i.useQuery)(s.definition,s.options),d=u.data,m=u.fetchStatus,f=Object(n.useState)([]),p=y()(f,2),b=p[0],v=p[1];return Object(n.useEffect)((function(){if("loaded"===m){var e=d;e.sort((function(e,t){return new Date(t.cozyMetadata.createdAt)-new Date(e.cozyMetadata.createdAt)})),v(e),e.length>0&&c(e[0])}}),[m]),r.a.createElement(h.Provider,{value:{currentAccount:l,setCurrentAccount:c,accountsList:b,setAccountsList:v,fetchStatus:m}},t)},x=Object(f.a)({disableGlobal:!0}),O=function(e){var t=e.client,a=e.lang,n=e.polyglot,l=e.children;return r.a.createElement(c.WebviewIntentProvider,null,r.a.createElement(p.b,{generateClassName:x},r.a.createElement(i.CozyProvider,{client:t},r.a.createElement(o.BarProvider,null,r.a.createElement(m.I18n,{lang:a,polyglot:n},r.a.createElement(d.default,null,r.a.createElement(u.BreakpointsProvider,null,r.a.createElement(E,null,r.a.createElement(s.a,null,l)))))))))},_=a("euuj"),w=a.n(_),C=a("iOQm"),S={timetable:{doctype:"io.cozy.calendar.events"},homeworks:{doctype:"io.cozy.calendar.todos"},grades:{doctype:"io.cozy.timeseries.grades"},presence:{doctype:"io.cozy.calendar.presence"}},D=a("8ZpT"),k=a.n(D),P=a("8XZk"),M=a("5z4W"),z=a.n(M),L=w()((function(){var e,t,n,r=document.querySelector("[role=application]"),o=Object(C.createRoot)(r),i=function(e){var t=JSON.parse(e.dataset.cozy),a=window.location.protocol,n="".concat(a,"//").concat(t.domain);return new l.a({uri:n,token:t.token,appMetadata:{slug:z.a.name,version:z.a.version},schema:S,store:!0})}(r),c=null===(e=JSON.parse(r.dataset.cozy))||void 0===e?void 0:e.locale,s=(n="en",/^\{\{\..*\}\}$/.test(t=c)?n:t),u=Object(P.b)(s,(function(e){return a("eUFy")("./".concat(e))}));return i.registerPlugin(k.a.plugin),{root:o,client:i,lang:s,polyglot:u}})),F=a("P0ff"),I=a("Iyno"),q=a("LGLP"),A=a.n(q),T=a("UdSB"),R=a.n(T),N=a("uRLs"),B=a.n(N),G=a("AHiN"),W=a("pvOl"),Y=a("4XnK"),H=a("/JgF"),J=a("+6H9"),Q=a("HYTT"),V=a("keV2"),U=a("WY6r"),X=a("Gyqq"),$=a("lTBH"),Z=a("d5dM"),K=a("9Ub/"),ee=a("N8wp"),te=a("CE71"),ae=a("/s+K"),ne=a("/5Aj"),re=a("vaJB"),oe=a.n(re),ie=a("zsXZ"),le=a.n(ie),ce=function(){var e=Object(m.useI18n)().t,t=Object(i.useClient)(),a=Object(i.useAppLinkWithStoreFallback)("pronote",t,"/").url,n=Object(i.useAppLinkWithStoreFallback)("store",t,"#/discover?type=konnector&category=education").url;return r.a.createElement("div",{className:"u-db-s u-flex u-flex-column u-items-center u-justify-center u-p-2"},r.a.createElement(ne.a,{icon:r.a.createElement("img",{src:le.a,style:{height:208}}),iconSize:"large",title:e("Layout.onboardImportText")},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginTop:"0.8rem"}},r.a.createElement(te.default,{app:{slug:"pronote"},href:a},(function(t){var a=t.onClick,n=t.href;return r.a.createElement(ae.default,{onClick:a,variant:"secondary",label:e("Layout.importFromButton")+" Pronote",startIcon:r.a.createElement("img",{src:oe.a,alt:"Pronote"}),style:{width:"100%"},href:n})})),r.a.createElement(te.default,{app:{slug:"store"},href:n},(function(t){var a=t.onClick,n=t.href;return r.a.createElement(ae.default,{onClick:a,variant:"ghost",label:e("Layout.exploreServices"),style:{width:"100%"},href:n})})))))},se=a("HZZ/"),ue=a.n(se),de=a("hJxD"),me=a.n(de),fe=function(){var e=Object(i.useClient)(),t=j().currentAccount,a=Object(n.useState)(null),r=y()(a,2),o=r[0],l=r[1];return Object(n.useEffect)((function(){var a=function(){var t=ue()(me.a.mark((function t(){var n,r,o,c,s,u,d,m,f,p;return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("üî¥ fetchCurrentAccountFolderLink",a),c={definition:function(){return Object(i.Q)("io.cozy.accounts").where({account_type:"pronote"}).partialIndex({account_type:"pronote"})},options:{as:"io.cozy.files/account_type/pronote",fetchPolicy:g}},t.next=4,e.query(c.definition(),c.options);case 4:if(s=t.sent,u=s.data,null!==(n=u[0])&&void 0!==n&&n._id){t.next=8;break}return t.abrupt("return");case 8:return console.log("accountResult",u),d=v(u[0]._id),t.next=12,e.query(d.definition(),d.options);case 12:if(m=t.sent,f=m.data,null!==(r=f[0])&&void 0!==r&&null!==(o=r.message)&&void 0!==o&&o.folder_to_save){t.next=16;break}return t.abrupt("return");case 16:console.log("triggerResult",f),p=Object(i.generateWebLink)({cozyUrl:e.getStackClient().uri,slug:"drive",subDomainType:e.capabilities.flat_subdomains?"flat":"nested",pathname:"",hash:"/folder/".concat(f[0].message.folder_to_save),searchParams:[]}),l(p);case 19:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t&&a()}),[e,t]),o},pe=["children","className","active","activeClassName"],be=Object(X.e)((function(e){var t=e.children,a=e.className,n=e.active,o=e.activeClassName,i=R()(e,pe);return r.a.createElement("a",A()({className:B()(a,n?o:null)},i),t)})),ye=function(){var e=Object(m.useI18n)().t,t=Object(u.default)().isMobile,a=Object(i.useClient)(),n=Object(F.o)(),l=Object(F.m)().pathname.slice(1),c=j(),s=c.accountsList,d=c.fetchStatus,f=fe(),p=function(e){return{onClick:function(){n("/"+e.join("/"))},active:l.includes(e[0])}};return 0==s.length?r.a.createElement(U.b,null,r.a.createElement(o.BarComponent,null),r.a.createElement(U.c,null,r.a.createElement(U.a,null,"loaded"===d?r.a.createElement(ce,null):r.a.createElement($.a,null)))):(console.log("currentAccountFolderLink",f),r.a.createElement(U.b,null,r.a.createElement(Z.a,{style:t?{overflow:"hidden"}:{}},r.a.createElement(X.d,null,r.a.createElement(X.b,null,r.a.createElement(be,p(["timetable"]),r.a.createElement(X.a,{icon:W.a}),r.a.createElement(X.c,null,e("Sidebar.timetable")))),r.a.createElement(X.b,null,r.a.createElement(be,p(["homeworks"]),r.a.createElement(X.a,{icon:Y.a}),r.a.createElement(X.c,null,e("Sidebar.homeworks")))),r.a.createElement(X.b,null,r.a.createElement(be,p(["grades"]),r.a.createElement(X.a,{icon:Q.a}),r.a.createElement(X.c,null,e("Sidebar.grades")))),r.a.createElement(X.b,null,r.a.createElement(be,p(["presence"]),r.a.createElement(X.a,{icon:V.a}),r.a.createElement(X.c,null,e("Sidebar.presence")))),f&&r.a.createElement(X.b,null,r.a.createElement(be,{href:f,target:"_blank"},r.a.createElement(X.a,{icon:H.a}),r.a.createElement(X.c,null,e("Sidebar.documents")),!t&&r.a.createElement(G.default,{icon:J.a,style:{marginLeft:"auto",marginRight:8}}))))),r.a.createElement(o.BarComponent,null),r.a.createElement(U.c,null,r.a.createElement(U.a,null,t&&r.a.createElement(o.BarCenter,null,r.a.createElement(K.default,{variant:"h5"},a.appMetadata.slug)),r.a.createElement(F.b,null))),r.a.createElement(ee.a,{t:e})))},ge=a("J58c"),ve=a.n(ge);function he(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function je(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?he(Object(a),!0).forEach((function(t){ve()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):he(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ee=[{label:"accompagnementperso",pretty:"Accompagnement personnalis√©",formats:{default:["accompagnement personnalise","accompagnemt perso"]},emoji:"ü§ù"},{label:"atprofessionnalis",pretty:"Atelier de professionnalisation",formats:{default:["atelier de professionnalisation","at professionnalis"]},emoji:"üîß"},{label:"artsplastiques",pretty:"Arts plastiques",formats:{default:["arts plastiques","artsplastiques"]},emoji:"üé®"},{label:"bloc1smdsi",pretty:"Bloc 1 : Support et mise a disposition des services informatiques",formats:{default:["bloc 1 support et mise a disposition des services informatiques","bloc 1 smdsi"]},emoji:"üíª"},{label:"bloc2sisr",pretty:"Bloc 2 : Solutions d‚Äôinfrastructure systemes et r√©seaux",formats:{default:["bloc 2 solutions d‚Äôinfrastructure systemes et reseaux","bloc 2 sisr"]},emoji:"üîå"},{label:"bloc2slam",pretty:"Bloc 2 : Solutions logicielles et applications m√©tiers",formats:{default:["bloc 2 solutions logicielles et applications metiers","bloc 2 slam"]},emoji:"üì±"},{label:"bloc3tp",pretty:"Bloc 3 : Travaux pratiques",formats:{default:["bloc 3 travaux pratiques","bloc 3 tp"]},emoji:"üõ†Ô∏è"},{label:"culecojurmanapp",pretty:"Culture √©conomique, juridique et manag√©riale appliqu√©e",formats:{default:["culture economique juridique et manageriale appliquee","cul eco jur man app"]},emoji:"üíº"},{label:"culturegeneetexpr",pretty:"Culture g√©nerale et expression",formats:{default:["culture generale et expression","culture gene et expr"]},emoji:"üìö"},{label:"cultecojurmanag",pretty:"Culture √©conomique, juridique et manag√©riale",formats:{default:["culture economique juridique et manageriale","cult eco jur manag"]},emoji:"üíº"},{label:"dnlsesanglais",pretty:"DNL : Sciences √©conomiques et sociales en anglais",formats:{default:["dnl ses anglais"]},emoji:"üá¨üáß"},{label:"educationcivique",pretty:"√âducation civique",formats:{default:["education civique","education civique"]},emoji:"üó≥Ô∏è"},{label:"enseignscientifique",pretty:"Enseignement scientifique",formats:{default:["enseignement scientifique","enseign scientifique"]},emoji:"üî¨"},{label:"edphysiquesport",pretty:"√âducation physique & sportive",formats:{default:["education physique et sportive","ed physique sport","education physique et sportive","eps"]},emoji:"üèÉ"},{label:"educationmusicale",pretty:"√âducation musicale",formats:{default:["education musicale","education musicale"]},emoji:"üéµ"},{label:"francais",pretty:"Fran√ßais",formats:{default:["fran√ßais","francais"]},emoji:"üìù"},{label:"histoiregeo",pretty:"Histoire-G√©ographie",formats:{default:["histoire geographie","histoire geo","histoire geograph","histoire-geographie","histoire-geographie"]},emoji:"üåç"},{label:"humanlitterphilo",pretty:"Humanites, Litt√©rature & Philosophie",formats:{default:["humanites litterature philosophie","human litter philo"]},emoji:"üìñ"},{label:"llcanglmondcont",pretty:"LLCER Anglais Monde Contemporain",formats:{default:["llcer anglais monde contemporain","llc angl mond cont"]},emoji:"üá¨üáß"},{label:"mathspourinformatq",pretty:"Math√©matiques pour l‚ÄôInformatique",formats:{default:["mathematiques pour l‚Äôinformatique","maths pour informatq"]},emoji:"üßÆ"},{label:"mathematiques",pretty:"Math√©matiques",formats:{default:["mathematiques","mathematiques","mathematiques 1ere","math 1ere"]},emoji:"üìê"},{label:"numeriquescinform",pretty:"Num√©rique & Sciences Informatiques",formats:{default:["numerique et sciences informatiques","numerique sc inform"]},emoji:"üíª"},{label:"physiquechimie",pretty:"Physique-Chimie",formats:{default:["physique chimie","phys chim"]},emoji:"‚öõÔ∏è"},{label:"sceconosociales",pretty:"Sciences √âconomiques & Sociales",formats:{default:["sciences economiques et sociales","sc econo sociales","sciences economiques et sociales"]},emoji:"üí∞"},{label:"sciencesvieterre",pretty:"Sciences de la Vie & de la Terre",formats:{default:["sciences de la vie et de la terre","sciences de la vie et de la terre","sciences vie terre"]},emoji:"üåø"},{label:"scnumeriqtechnol",pretty:"Sciences Num√©riques & Technologie",formats:{default:["sciences numeriques et technologie","sc numeriq technol"]},emoji:"üíª"},{label:"viedeclasse",pretty:"Vie de classe",formats:{default:["vie de classe","vie de classe"]},emoji:"üë•"}],xe=function(e){var t,a,n={expressionecrite:"expression √©crite",expressionorale:"expression orale",comprehensionorale:"compr√©hension orale",comprehensionecrite:"compr√©hension √©crite",ecrit:"√©crit",oral:"oral"},r=e.toLowerCase().split(new RegExp(Object.keys(n).join("|")))[0].replace("ensscientifique",""),o=Ee.find((function(e){return e.label===r})),i=(null===(t=Object.entries(n).find((function(t){var a=y()(t,1)[0];return e.includes(a)})))||void 0===t?void 0:t[1])||"";return o?je(je({},o),{},{speciality:i}):{label:e,pretty:(a=r,a.length<4?a.toUpperCase():a.charAt(0).toUpperCase()+a.slice(1)),formats:{default:[e]},speciality:i}},Oe=a("YJvl"),_e=a("tRUj"),we=a("xr2j"),Ce=a("iSyh"),Se=a("fzn7"),De=a("mfku"),ke=a("dJzJ"),Pe=a("OEPu"),Me=a("4jS1"),ze=a("i5f2"),Le=a("dUf/"),Fe=a("MRub"),Ie=function(){var e,t=Object(m.useI18n)().t,a=Object(F.q)(),n=a.subjectId,o=a.gradeId,l=Object(F.o)(),c={definition:function(){return Object(i.Q)("io.cozy.timeseries.grades").getById(e)},options:{as:"io.cozy.timeseries.grades/"+(e=n),fetchPolicy:g,singleDocData:!0}},s=Object(i.useQuery)(c.definition,c.options).data,u=s&&s.series.find((function(e){return e.id===o})),d=u?[{primary:t("Grades.values.student.title"),secondary:t("Grades.values.student.description"),value:"".concat(parseFloat(u.value.student).toFixed(2)),icon:Q.a,important:!0},{primary:t("Grades.values.class.title"),secondary:t("Grades.values.class.description"),value:"".concat(parseFloat(u.value.classAverage).toFixed(2)),icon:ke.a},u.value.classMax>=0&&{primary:t("Grades.values.max.title"),secondary:t("Grades.values.max.description"),value:"".concat(parseFloat(u.value.classMax).toFixed(2)),icon:Ce.a},u.value.classMin>=0&&{primary:t("Grades.values.min.title"),secondary:t("Grades.values.min.description"),value:"".concat(parseFloat(u.value.classMin).toFixed(2)),icon:Se.a}]:[];return r.a.createElement(_e.a,{open:!0,onClose:function(){return l("..",{replace:!0})},disableGutters:!0,title:r.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"2px"}},r.a.createElement(Oe.a,null,r.a.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},r.a.createElement(K.default,{variant:"h5",style:{width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",border:"1px solid var(--secondaryColorLightest)"}},s&&(xe(s.subject).emoji||"üìö")),r.a.createElement(K.default,{variant:"subtitle1",color:"textSecondary"},s&&(xe(s.subject).pretty||"Aucune mati√®re"))),r.a.createElement(K.default,{variant:"subtitle1",color:"textPrimary"},u&&(u.label||"Note sans titre"))),r.a.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},r.a.createElement(K.default,{variant:"h2",color:"textPrimary"},u&&parseFloat(u.value.student).toFixed(2)),r.a.createElement(K.default,{variant:"body1",color:"textSecondary",style:{marginBottom:"2px"}},"/",u&&u.value.outOf))),content:r.a.createElement("div",null,r.a.createElement(Pe.default,{subheader:r.a.createElement(Fe.a,null,t("Grades.dialogContext"))},r.a.createElement(Me.default,null,r.a.createElement(ze.default,null,r.a.createElement(G.default,{icon:W.a})),r.a.createElement(Le.default,{primary:t("Grades.date"),secondary:u&&new Date(u.date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})})),r.a.createElement(we.a,{component:"li",variant:"inset"}),r.a.createElement(Me.default,null,r.a.createElement(ze.default,null,r.a.createElement(G.default,{icon:De.a})),r.a.createElement(Le.default,{primary:t("Grades.values.coefficient.title"),secondary:t("Grades.values.coefficient.description")}),r.a.createElement("div",{className:"cozy-grade-chip",style:{display:"flex",alignItems:"flex-end"}},r.a.createElement(K.default,{variant:"body2",color:"textSecondary"},"x"),r.a.createElement(K.default,{variant:"body1",color:"textPrimary",style:{fontWeight:"bold"}},u&&parseFloat(u.value.coef).toFixed(2))))),r.a.createElement(Pe.default,{subheader:r.a.createElement(Fe.a,null,t("Grades.valuesList"))},d.map((function(e,t){return e&&r.a.createElement("div",{key:t},r.a.createElement(Me.default,null,r.a.createElement(ze.default,null,r.a.createElement(G.default,{icon:e.icon})),r.a.createElement(Le.default,{primary:r.a.createElement(K.default,{variant:"body1",style:{fontWeight:e.important?"bold":"normal"}},e.primary),secondary:e.secondary}),r.a.createElement("div",{className:"cozy-grade-chip",style:{display:"flex",alignItems:"flex-end"}},r.a.createElement(K.default,{variant:"body1",color:"textPrimary",style:{fontWeight:e.important?"bold":"normal"}},parseFloat(e.value).toFixed(2)),r.a.createElement(K.default,{variant:"body2",color:"textSecondary"},"/",parseFloat(u.value.outOf).toFixed(0)))),t!==d.filter(Boolean).length-1&&r.a.createElement(we.a,{component:"li",variant:"inset"}))}))))})},qe=function(e){var t=e.subject,a=e.date;return r.a.createElement("div",{style:{gap:16},className:"u-flex u-flex-items-center"},r.a.createElement(K.default,{variant:"h3"},t&&(xe(t).emoji||"üìö")),r.a.createElement("div",null,r.a.createElement(K.default,{variant:"h6"},t&&xe(t).pretty),a&&r.a.createElement(K.default,{variant:"subtitle2",color:"textSecondary"},new Date(a).toLocaleDateString("default",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))))},Ae=function(){var e,t,a,n=Object(F.q)().homeworkId,o=Object(F.o)(),l={definition:function(){return Object(i.Q)("io.cozy.calendar.todos").getById(a)},options:{as:"io.cozy.calendar.todos/"+(a=n),fetchPolicy:g,singleDocData:!0}},c=Object(i.useQuery)(l.definition,l.options).data,s=(null==c?void 0:c.dueDate)&&(null==c||null===(e=c.dueDate)||void 0===e?void 0:e.replace(/(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2})Z/,"$1-$2-$3T$4:$5:$6Z"));return r.a.createElement(_e.a,{open:!0,onClose:function(){return o("..",{replace:!0})},title:r.a.createElement(qe,{subject:null==c?void 0:c.subject,date:s}),content:null!==(t=null==c?void 0:c.summary)&&void 0!==t?t:""})},Te=a("oRW6"),Re=a("PfmE"),Ne=a("KsnS"),Be=a("LFaT"),Ge=a("XAJ7"),We=function(){var e,t,a,n,o=Object(F.q)().courseId,l=Object(F.o)(),c={definition:function(){return Object(i.Q)("io.cozy.calendar.events").getById(n)},options:{as:"io.cozy.calendar.events/"+(n=o),fetchPolicy:g,singleDocData:!0}},s=Object(i.useQuery)(c.definition,c.options).data,u=Object(m.useI18n)().t,d=s?[{title:u("Timetable.start"),subtitle:new Date(s.start).toLocaleTimeString("default",{hour:"2-digit",minute:"2-digit"}),icon:Te.a},{title:u("Timetable.end"),subtitle:new Date(s.end).toLocaleTimeString("default",{hour:"2-digit",minute:"2-digit"}),icon:Re.a}]:[],f=s?[{title:u("Timetable.location"),subtitle:null!==(e=s.location)&&void 0!==e?e:"Non d√©fini",icon:Ge.default},{title:u("Timetable.teacher"),subtitle:null!==(t=s.organizer)&&void 0!==t?t:"Non d√©fini",icon:Be.a},{title:u("Timetable.status"),subtitle:"CONFIRMED"==(null!==(a=s.status)&&void 0!==a?a:"")?"Maintenu":"Non maintenu",icon:Ne.a}]:[];return r.a.createElement(_e.a,{open:!0,disableGutters:!0,onClose:function(){return l("..",{replace:!0})},title:r.a.createElement(qe,{subject:null==s?void 0:s.subject,date:null==s?void 0:s.start}),content:r.a.createElement("div",null,r.a.createElement(Pe.default,null,r.a.createElement(Fe.a,null,u("Timetable.duration")),d.map((function(e,t){return r.a.createElement(Me.default,{key:t},r.a.createElement(ze.default,null,e.icon&&r.a.createElement(G.default,{icon:e.icon})),r.a.createElement(Le.default,{primary:e.title,secondary:e.subtitle}))}))),r.a.createElement(Pe.default,null,r.a.createElement(Fe.a,null,u("Timetable.informations")),f.map((function(e,t){return r.a.createElement(Me.default,{key:t},r.a.createElement(ze.default,null,e.icon&&r.a.createElement(G.default,{icon:e.icon})),r.a.createElement(Le.default,{primary:e.title,secondary:e.subtitle}))}))))})},Ye=a("QGb3"),He=a.n(Ye),Je=a("F7WE"),Qe=function(e){var t=e.grade,a=e.j,n=e.subject,o={cozyGradeChip:{display:"flex",alignItems:"flex-end"}},i=Object(F.o)();return r.a.createElement("div",{key:t.id},r.a.createElement(Me.default,{button:!0,onClick:function(){i("/grades/grade/".concat(n._id,"/").concat(t.id))},style:{borderRadius:8}},r.a.createElement(ze.default,null,r.a.createElement(K.default,{variant:"h3",color:"textPrimary"},xe(n.subject).emoji||"üìö")),r.a.createElement(Le.default,{primary:t.label||"Note sans titre",secondary:new Date(t.date).toLocaleDateString("default",{year:"numeric",month:"long",day:"numeric"})}),r.a.createElement("div",{className:"cozy-grade-chip",style:o.cozyGradeChip},r.a.createElement(K.default,{variant:"body2",color:"textPrimary"},parseFloat(t.value.student).toFixed(2)),r.a.createElement(K.default,{variant:"body2",color:"textSecondary"},"/",parseFloat(t.value.outOf).toFixed(0)))),a!==n.series.length-1&&r.a.createElement(we.a,{component:"li",variant:"inset"}))},Ve=a("HO4k"),Ue=a("DmLS");Ve.e.register(Ve.d,Ve.i,Ve.b,Ve.n,Ve.o,Ve.g);var Xe=function(e){var t=e.subjects,a=Object(m.useI18n)().t,n=Object(u.default)().isMobile,o=getComputedStyle(document.documentElement).getPropertyValue("--primaryColor"),i=getComputedStyle(document.documentElement).getPropertyValue("--primaryColorLightest"),l=getComputedStyle(document.documentElement).getPropertyValue("--successColorLight"),c=getComputedStyle(document.documentElement).getPropertyValue("--errorColorLight"),s={labels:t.map((function(e){return t=xe(e.subject).pretty,a=10,t.length>a?t.substring(0,a)+"...":t;var t,a})),datasets:[{label:a("Grades.values.class.title"),data:t.map((function(e){var t,a;return null!==(t=null===(a=e.aggregation)||void 0===a?void 0:a.avgClass)&&void 0!==t?t:0})),backgroundColor:i,borderRadius:5},{label:a("Grades.values.student.title"),data:t.map((function(e){var t,a;return null!==(t=null===(a=e.aggregation)||void 0===a?void 0:a.avgGrades)&&void 0!==t?t:0})),backgroundColor:o,borderRadius:5},{label:a("Grades.values.max.title"),data:t.map((function(e){var t,a;return null!==(t=null===(a=e.aggregation)||void 0===a?void 0:a.maxClass)&&void 0!==t?t:0})),backgroundColor:l+"60",borderRadius:5,hidden:!0},{label:a("Grades.values.min.title"),data:t.map((function(e){var t,a;return null!==(t=null===(a=e.aggregation)||void 0===a?void 0:a.minClass)&&void 0!==t?t:0})),backgroundColor:c+"60",borderRadius:5,hidden:!0}]};return r.a.createElement("div",{style:{padding:"16px"}},r.a.createElement(Ue.a,{height:n?150:70,data:s,options:{responsive:!0,plugins:{legend:{labels:{font:{size:14,family:"Lato",weight:"500"}}},title:{display:!1}},scales:{x:{grid:{display:!1}},y:{grid:{drawBorder:!1}}}}}))},$e=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F7B731","#6A5ACD","#FF69B4","#20B2AA","#FF7F50","#9370DB","#3CB371","#FF4500","#1E90FF","#FFD700","#8A2BE2","#32CD32","#FF1493","#00CED1","#FF8C00","#7B68EE","#00FA9A","#DC143C","#1ABC9C","#F39C12","#8E44AD","#2ECC71","#E74C3C","#3498DB","#F1C40F","#9B59B6","#2980B9","#E67E22","#27AE60","#D35400"];function Ze(e,t){if(0===e.length)return null;var a=function(e){for(var t=0,a=0;a<e.length;a++)t=Math.imul(31,t)+e.charCodeAt(a)|0;return function(){return(((t=Math.imul(31,t)+1|0)^t>>>15)>>>0)/4294967296}}(t);return e[Math.floor(a()*e.length)]}var Ke=function(e){return Ze($e,e)},et=function(e){var t=e.subject,a=Object(u.default)().isMobile;return r.a.createElement(Fe.a,{style:{borderRadius:a?0:8}},r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"10px"}},r.a.createElement("div",{style:{display:"flex",alignItems:"center",gap:"14px",flex:1,width:"100%",overflow:"hidden"}},r.a.createElement("div",{style:{width:"8px",height:"8px",backgroundColor:Ke(t.subject),borderRadius:"50px"}}),r.a.createElement(K.default,{variant:"subtitle1",color:"textSecondary",noWrap:!0},xe(t.subject).pretty||""),r.a.createElement(K.default,{variant:"caption",color:"textSecondary",noWrap:!0},xe(t.subject).speciality||"")),r.a.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},r.a.createElement(K.default,{variant:"body1",color:"textPrimary",style:{fontWeight:"bold"}},parseFloat(t.aggregation.avgGrades).toFixed(2)),r.a.createElement(K.default,{variant:"body2",color:"textSecondary",style:{marginBottom:.5}},"/20"))))},tt=a("gQXR"),at=a("J14j"),nt=a("gtDA"),rt=a("1Crc"),ot=function(e){var t=e.periodDropdownRef,a=e.selectedPeriod,n=e.setSelectedPeriod,o=e.setPeriodMenuOpen,i=e.periodMenuOpen,l=e.periods,c=e.t,s=e.textVariant,d=Object(u.default)().isMobile;return r.a.createElement(r.a.Fragment,null,r.a.createElement(at.a,{ref:t,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(){return o(!i)},textVariant:s,style:{height:"100%",paddingLeft:16,width:d?"100%":"auto"}},a||c("Grades.selectPeriod")),r.a.createElement(nt.a,{open:i,anchorEl:t.current,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},keepMounted:!0,onClose:function(){return o(!1)}},l.map((function(e,t){return r.a.createElement(rt.a,{key:t,onClick:function(){n(e),o(!1)},selected:e===a},r.a.createElement(Le.default,{primary:e}))})),0===l.length&&r.a.createElement(rt.a,{disabled:!0},r.a.createElement(Le.default,{primary:c("Grades.emptyList.periods")}))))},it=function(e){var t=e.yearDropdownRef,a=e.selectedYear,n=e.selectedPeriod,o=e.setSelectedYear,i=e.setYearMenuOpen,l=e.yearMenuOpen,c=e.allPeriods,s=e.t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(at.a,{ref:t,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(){return i(!l)},style:{height:"100%",paddingRight:16}},a||s("Grades.selectYear")),r.a.createElement(nt.a,{open:l,anchorEl:t.current,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},keepMounted:!0,onClose:function(){return i(!1)}},He()(new Set(c.filter((function(e){return e.title===n})).map((function(e){return e.year})))).map((function(e,t){return r.a.createElement(rt.a,{key:t,onClick:function(){o(e),i(!1)},selected:e===a},r.a.createElement(Le.default,{primary:e}))}))))},lt=function(e){var t=e.periodDropdownRef,a=e.yearDropdownRef,n=e.selectedPeriod,o=e.setSelectedPeriod,i=e.selectedYear,l=e.setSelectedYear,c=e.setPeriodMenuOpen,s=e.periodMenuOpen,d=e.setYearMenuOpen,m=e.yearMenuOpen,f=e.allPeriods,p=e.periods,b=e.years,y=e.t,g=Object(u.default)().isMobile;return r.a.createElement(tt.a,{elevation:4,style:{height:40,padding:"0 8px",overflow:"hidden",borderRadius:40,display:"flex",gap:"16px",alignItems:"center",justifyContent:"center",width:g?"100%":"auto"}},r.a.createElement(ot,{periodDropdownRef:t,selectedPeriod:n,setSelectedPeriod:o,setPeriodMenuOpen:c,periodMenuOpen:s,periods:p,t:y}),r.a.createElement(it,{yearDropdownRef:a,selectedYear:i,setSelectedYear:l,setYearMenuOpen:d,yearMenuOpen:m,allPeriods:f,selectedPeriod:n,years:b,t:y}))},ct=a("INxB"),st=a("bVLx"),ut=function(){var e,t,a,o,i=j(),l=i.currentAccount,c=i.setCurrentAccount,s=i.accountsList,u=Object(n.useState)(!1),d=y()(u,2),m=d[0],f=d[1],p=Object(n.useRef)(null);return!s||s.length<2?null:r.a.createElement("div",null,r.a.createElement(at.a,{ref:p,onClick:function(){return f(!0)}},r.a.createElement(K.default,{noWrap:!0,variant:"h4",color:"textPrimary"},null==l||null===(e=l.contact)||void 0===e||null===(t=e.name)||void 0===t?void 0:t.givenName," ",null==l||null===(a=l.contact)||void 0===a||null===(o=a.name)||void 0===o?void 0:o.familyName)),r.a.createElement(st.a,{open:m,anchorEl:p.current,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},keepMounted:!0,onClose:function(){return f(!1)}},s.map((function(e){var t,a,n,o,i,s,u;return r.a.createElement(ct.a,{key:e._id,onClick:function(){c(e),f(!1)},selected:(null==l?void 0:l._id)===e._id},r.a.createElement("div",{style:{minWidth:42,width:42,height:20,display:"flex",alignItems:"center",justifyContent:"center",border:"0px solid var(--secondaryColorLightest)",backgroundColor:"var(--secondaryColorLightest)",borderRadius:"5px"}},r.a.createElement("p",{style:{width:"100%",textAlign:"center",fontSize:"12.5px",color:"var(--secondaryTextColor)",fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},(u=null==e||null===(t=e.contact)||void 0===t?void 0:t.jobTitle).includes("de")?u.split("de")[1].trim():u)),r.a.createElement(Le.default,null,r.a.createElement(K.default,{variant:"body1",color:"textPrimary",style:{fontWeight:600}},null==e||null===(a=e.contact)||void 0===a||null===(n=a.name)||void 0===n?void 0:n.givenName," ",null==e||null===(o=e.contact)||void 0===o||null===(i=o.name)||void 0===i?void 0:i.familyName),r.a.createElement(K.default,{variant:"body2",color:"textSecondary"},null==e||null===(s=e.contact)||void 0===s?void 0:s.company)))}))))},dt=function(e){var t=e.children,a=Object(u.default)().isMobile;return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(o.BarCenter,null,r.a.createElement(ut,null)),!a||t?r.a.createElement(tt.a,{square:!0,elevation:0,style:{height:68,minHeight:68},className:"u-p-1 u-flex u-flex-row u-flex-items-center u-flex-justify-between"},!a&&r.a.createElement(ut,null),t):null)},mt=function(){var e,t,a,o=Object(m.useI18n)().t,l=Object(u.default)().isMobile,c=j().currentAccount,s={definition:function(){return Object(i.Q)("io.cozy.timeseries.grades").where({title:a||{$gt:null},cozyMetadata:{sourceAccountIdentifier:t}}).indexFields(["cozyMetadata.sourceAccountIdentifier","title"])},options:{as:"io.cozy.timeseries.grades/account/"+(t=null==c||null===(e=c.cozyMetadata)||void 0===e?void 0:e.sourceAccountIdentifier)+"/period/"+a,fetchPolicy:g}},d=Object(i.useQuery)(s.definition,s.options),f=d.data,p="loading"==d.fetchStatus,b=He()(new Set((null!=f?f:[]).map((function(e){return{title:e.title,year:new Date(e.startDate).getFullYear()}}))));b.sort((function(e,t){return"Hors p√©riode"===e.title?1:"Hors p√©riode"===t.title?-1:0}));var v=He()(new Set((null!=b?b:[]).map((function(e){return e.title})))),h=He()(new Set((null!=b?b:[]).map((function(e){return e.year})))),E=Object(n.useState)(""),x=y()(E,2),O=x[0],_=x[1],w=Object(n.useState)(""),C=y()(w,2),S=C[0],D=C[1];Object(n.useEffect)((function(){O&&S&&function(e,t){if(!b.some((function(a){return a.title===e&&a.year===t}))){var a,n=null===(a=b.find((function(t){return t.title===e})))||void 0===a?void 0:a.year;n&&D(n)}}(O,S)}),[O,S]),""===O&&v.length>0&&_(v[0]),""===S&&h.length>0&&D(h[0]);var k=Object(n.useState)(!1),P=y()(k,2),M=P[0],z=P[1],L=Object(n.useState)(!1),I=y()(L,2),q=I[0],A=I[1],T=r.a.useRef(null),R=r.a.useRef(null);Object(n.useEffect)((function(){v.includes(O)||_(v[0])}),[f]);var N={periodDropdownRef:T,yearDropdownRef:R,selectedPeriod:O,setSelectedPeriod:_,selectedYear:S,setSelectedYear:D,setPeriodMenuOpen:z,periodMenuOpen:M,setYearMenuOpen:A,yearMenuOpen:q,allPeriods:b,periods:v,years:h,t:o};return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.b,null),r.a.createElement(dt,{title:o("Grades.title"),loading:p},r.a.createElement(lt,N)),(null!=f?f:[]).length>0&&!p&&r.a.createElement(Xe,{subjects:f?f.filter((function(e){return e.title===O})):[]}),0===(null!=f?f:[]).length&&!p&&r.a.createElement(ne.a,{icon:Je.a,title:o("Grades.emptyList.title"),text:o("Grades.emptyList.description"),centered:!0}),(null!=f?f:[]).filter((function(e){return e.title===O})).filter((function(e){return new Date(e.startDate).getFullYear()===parseInt(S)})).map((function(e,t){return r.a.createElement(Pe.default,{key:t,subheader:l?r.a.createElement(et,{subject:e}):r.a.createElement("div",null,r.a.createElement(et,{subject:e})),style:{marginLeft:l?"0px":"16px",marginRight:l?"0px":"16px"}},e.series.map((function(t,a){return r.a.createElement(Qe,{key:a,grade:t,j:a,subject:e})})),0==e.series.length&&r.a.createElement(ne.a,{icon:Je.a,title:o("Grades.emptyList.title"),text:o("Grades.emptyList.description"),centered:!0}))})))},ft=a("13md"),pt=a("2Kpg"),bt=function(e){var t=e.hw,a=e.j,n=e.day,o=Object(F.o)();return r.a.createElement("div",{key:a},r.a.createElement(Me.default,{button:!0,onClick:function(){o("homework/".concat(t._id))},style:{borderRadius:8}},r.a.createElement(ze.default,null,r.a.createElement(pt.default,{checked:t.completed,disabled:!0})),r.a.createElement(Le.default,{primary:r.a.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},r.a.createElement("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:Ke(t.subject)}}),r.a.createElement(K.default,{variant:"subtitle2",color:"textSecondary"},xe(t.subject).pretty)),secondary:r.a.createElement(K.default,{variant:"body1",color:"textPrimary",noWrap:!0},t.summary)})),a<n.hws.length-1&&r.a.createElement(we.a,{component:"li",variant:"inset"}))};function yt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function gt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(a),!0).forEach((function(t){ve()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var vt=function(){var e,t,a=Object(m.useI18n)().t,n=Object(u.default)().isMobile,o=j().currentAccount,l={definition:function(){return Object(i.Q)("io.cozy.calendar.todos").where({dueDate:{$gt:null},cozyMetadata:{sourceAccountIdentifier:t}}).indexFields(["cozyMetadata.sourceAccountIdentifier","dueDate"]).sortBy([{"cozyMetadata.sourceAccountIdentifier":"desc"},{dueDate:"desc"}])},options:{as:"io.cozy.calendar.todos/account/"+(t=null==o||null===(e=o.cozyMetadata)||void 0===e?void 0:e.sourceAccountIdentifier),fetchPolicy:g}},c=Object(i.useQuery)(l.definition,l.options),s=c.data,d=c.fetchStatus,f=c.hasMore,p=c.fetchMore,b="loading"==d,y=(null!=s?s:[]).reduce((function(e,t){var a=t.dueDate.replace(/(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2})Z/,"$1-$2-$3T$4:$5:$6Z"),n=new Date(a),r=n.toISOString();return e.find((function(e){return e.date===r}))?e.map((function(e){return e.date===r?gt(gt({},e),{},{hws:[].concat(He()(e.hws),[t])}):e})):[].concat(He()(e),[{date:n.toISOString(),hws:[t]}])}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.b,null),r.a.createElement("div",null,r.a.createElement(dt,{title:a("Homeworks.title"),loading:b}),0===y.length&&!b&&r.a.createElement(ne.a,{icon:Je.a,title:a("Homeworks.emptyList.title"),description:a("Homeworks.emptyList.description")}),r.a.createElement("div",{style:{height:"100%",overflow:"auto",overflowY:"scroll",padding:n?"0":"0 16px",marginTop:-8}},y.map((function(e,t){return r.a.createElement(Pe.default,{key:t,className:e.current?"current":""},r.a.createElement(Fe.a,{style:{borderRadius:n?0:8}},r.a.createElement(K.default,{variant:"subtitle2",color:"textSecondary"},new Date(e.date).toLocaleDateString("default",{weekday:"long",month:"long",day:"numeric",year:"numeric"}))),e.hws.map((function(t,a){return r.a.createElement(bt,{key:a,hw:t,j:a,day:e})})))})),f&&r.a.createElement(ft.a,{label:a("Homeworks.loadMore"),fetchMore:p}))))},ht=a("Yb2N"),jt=a("+XJ+"),Et=function(e){var t=e.event,a=e.j,n=e.group,o=Object(m.useI18n)().t;return r.a.createElement("div",{key:t._id},r.a.createElement(Me.default,{key:t._id,style:{borderRadius:8}},r.a.createElement(ze.default,null,r.a.createElement(G.default,{icon:"DELAY"==t.xType?Te.a:"ABSENCE"==t.xType?V.a:jt.a})),r.a.createElement(Le.default,{primary:r.a.createElement(r.a.Fragment,null,r.a.createElement(K.default,{variant:"h6",noWrap:!0},"DELAY"==t.xType?o("Presence.delay"):"ABSENCE"==t.xType?o("Presence.absence"):o("Presence.presence")),r.a.createElement(K.default,{variant:"body1",noWrap:!0},t.label)),secondary:r.a.createElement(K.default,{variant:"body2",color:"textSecondary",noWrap:!0},new Date(t.start).toLocaleString("default",{weekday:"short",month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}))}),r.a.createElement(ht.a,{label:t.xJustified?o("Presence.justified"):t.label?o("Presence.justifiedUnreceivable"):o("Presence.notJustified"),color:t.xJustified?"success":t.label?"default":"error",disabled:!t.xJustified&&t.label})),a!==n.events.length-1&&r.a.createElement(we.a,{component:"li",variant:"inset"}))};function xt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ot(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(a),!0).forEach((function(t){ve()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _t=function(){var e,t,a=Object(m.useI18n)().t,n=Object(u.default)().isMobile,o=j().currentAccount,l={definition:function(){return Object(i.Q)("io.cozy.calendar.presence").where({start:{$gt:null},cozyMetadata:{sourceAccountIdentifier:t}}).sortBy([{start:"desc"}]).indexFields(["cozyMetadata.sourceAccountIdentifier","start"])},options:{as:"io.cozy.calendar.presence/account/"+(t=null==o||null===(e=o.cozyMetadata)||void 0===e?void 0:e.sourceAccountIdentifier),fetchPolicy:g}},c=Object(i.useQuery)(l.definition,l.options),s=c.data,d="loading"==c.fetchStatus,f=(null!=s?s:[]).reduce((function(e,t){var a=new Date(t.start).getMonth();return e.find((function(e){return e.month===a}))?e.map((function(e){return e.month===a?Ot(Ot({},e),{},{events:[].concat(He()(e.events),[t])}):e})):[].concat(He()(e),[{month:a,prettyMonth:new Date(t.start).toLocaleString("default",{month:"long",year:"numeric"}),events:[t]}])}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(dt,{title:a("Presence.title"),loading:d}),0===f.length&&!d&&r.a.createElement(ne.a,{icon:r.a.createElement(Je.a,null),title:a("Presence.emptyList.title"),description:a("Presence.emptyList.description")}),f.map((function(e){return r.a.createElement(Pe.default,{key:e.month,style:{marginTop:"-8px",marginLeft:n?"0px":"16px",marginRight:n?"0px":"16px"}},r.a.createElement(Fe.a,{style:{borderRadius:n?0:8}},r.a.createElement(K.default,{variant:"subtitle2",color:"textSecondary"},e.prettyMonth)),e.events.map((function(t,a){return r.a.createElement(Et,{key:t._id,event:t,j:a,group:e})})))}))))},wt=a("ro7u"),Ct=a("pC+U"),St=a("EUC4"),Dt=a("rfej"),kt=a("L7Xp"),Pt=a("RMip"),Mt=a("HCvV"),zt=a("K4g+"),Lt=a("Mb5X"),Ft=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},It=function(e){var t=e.date,a=e.onDateChange,o=Object(n.useState)(new Date(t)),i=y()(o,2),l=i[0],c=i[1],s=Object(m.useI18n)().t,d=Object(u.default)().isMobile;Object(n.useEffect)((function(){a&&a(l)}),[l]);var f=r.a.useRef(null),p=r.a.useRef(null),b=r.a.useRef(null),g=Object(n.useState)(!1),v=y()(g,2),h=v[0],j=v[1],E=Object(n.useState)(!1),x=y()(E,2),O=x[0],_=x[1],w=Object(n.useState)(!1),C=y()(w,2),S=C[0],D=C[1],k=function(e){return Object(wt.default)(e,"dd")};Object(n.useEffect)((function(){var e=function(e,t){for(var a=new Date(e,t,0).getDate(),n=[],r=1;r<=a;r++){1===new Date(e,t,r).getDay()&&n.push(r)}return n}(l.getFullYear(),l.getMonth()),t=l.getDate();e.includes(l.getDate())||(t=e.reduce((function(e,t){return Math.abs(t-l.getDate())<Math.abs(e-l.getDate())?t:e})))!=l.getDate()&&c(new Date(l.getFullYear(),l.getMonth(),t))}),[l]);return r.a.createElement("div",{style:{display:"flex",gap:6,width:d?"100%":"auto"}},r.a.createElement(tt.a,{elevation:4,style:{height:40,padding:"0 8px",overflow:"hidden",borderRadius:40,display:"flex",gap:"16px",alignItems:"center",justifyContent:"center",width:d?"100%":"auto"}},r.a.createElement(at.a,{ref:f,onClick:function(){return j(!0)},textVariant:"body1",style:{height:"100%",paddingLeft:16},noWrap:!0},function(e){return k(Object(Ct.a)(e,{weekStartsOn:1}))}(l)," - ",function(e){return k(Object(St.a)(e,{weekStartsOn:1}))}(l)),r.a.createElement(at.a,{ref:p,onClick:function(){return _(!0)},textVariant:"body1",style:{height:"100%",width:d?"100%":"auto"}},Ft(l.toLocaleDateString("default",{month:"long"}))),r.a.createElement(at.a,{ref:b,onClick:function(){return D(!0)},textVariant:"body1",style:{height:"100%",paddingRight:16}},l.toLocaleDateString("default",{year:"numeric"}))),r.a.createElement(tt.a,{elevation:4,style:{height:40,width:40,minWidth:40,overflow:"hidden",borderRadius:40,display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement(Mt.default,{size:"large",onClick:function(){return(e=new Date(l)).setDate(l.getDate()-7),void c(e);var e}},r.a.createElement(G.default,{icon:zt.a}))),r.a.createElement(tt.a,{elevation:4,style:{height:40,width:40,minWidth:40,overflow:"hidden",borderRadius:40,display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement(Mt.default,{size:"large",onClick:function(){return(e=new Date(l)).setDate(l.getDate()+7),void c(e);var e}},r.a.createElement(G.default,{icon:Lt.default}))),r.a.createElement(nt.a,{open:h,anchorEl:f.current,keepMounted:!0,onClose:function(){return j(!1)}},function(e){if(!e)return[];for(var t=Object(Ct.a)(Object(Dt.a)(e),{weekStartsOn:1}),a=Object(St.a)(Object(kt.a)(e),{weekStartsOn:1}),n=[];t<=a;){var r=Object(St.a)(t,{weekStartsOn:1});t>Object(Dt.a)(e)&&n.push({start:t.getDate(),end:r.getDate()}),t=Object(Pt.a)(t,1)}return n}(l).map((function(e){return r.a.createElement(rt.a,{key:e.start,selected:e.start===l.getDate(),onClick:function(){var t,a;t=e.start,a=t,c(new Date(l.getFullYear(),l.getMonth(),a)),j(!1)}},e.start," ",s("Timetable.to")," ",e.end)}))),r.a.createElement(nt.a,{open:O,anchorEl:p.current,keepMounted:!0,onClose:function(){return _(!1)}},He()(Array(12).keys()).map((function(e){return r.a.createElement(rt.a,{key:e,selected:e===l.getMonth(),onClick:function(){!function(e){var t=e,a=new Date(l.getFullYear(),t,l.getDate());c(a)}(e),_(!1)}},Ft(new Date(l.getFullYear(),e).toLocaleDateString("default",{month:"long"})))}))),r.a.createElement(nt.a,{open:S,anchorEl:b.current,keepMounted:!0,onClose:function(){return D(!1)}},He()(Array(30).keys()).map((function(e){return r.a.createElement(rt.a,{key:e,selected:l.getFullYear()+e-10===l.getFullYear(),onClick:function(){!function(e){var t=l.getFullYear()+e-10;c(new Date(t,l.getMonth(),l.getDate()))}(e),D(!1)}},l.getFullYear()+e-10)}))))},qt=function(e,t){var a=t-e,n=Math.floor(a/36e5),r=Math.floor(a%36e5/6e4);return n?"".concat(n,"h ").concat(r,"min"):"".concat(r,"min")};function At(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Tt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?At(Object(a),!0).forEach((function(t){ve()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):At(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Rt=function(e){var t=e.color,a=e.style;return r.a.createElement("div",{style:Tt(Tt({},a),{},{minWidth:"4px",backgroundColor:t||"#888"}),className:"u-flex u-flex-items-center u-flex-justify-center u-h-3 u-bdrs-4"})},Nt=function(e){var t=e.course,a=Object(F.o)(),n=Object(m.useI18n)().t;return t&&t.subject?r.a.createElement(Me.default,{key:t._id,button:!0,onClick:function(){a("/timetable/course/".concat(t._id))},disabled:"CANCELLED"==t.status,style:{height:92,borderRadius:8}},r.a.createElement(Rt,{color:Ke(t.subject)}),r.a.createElement(Le.default,{primary:r.a.createElement(r.a.Fragment,null,"CANCELLED"!==t.status?r.a.createElement("div",{style:{display:"flex",gap:"4px",alignItems:"center"}},r.a.createElement(K.default,{variant:"subtitle2",color:"textPrimary",noWrap:!0},new Date(t.start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," "),r.a.createElement(K.default,{variant:"body2",color:"textSecondary",noWrap:!0,style:{fontWeight:400,fontSize:12}},"| ",qt(new Date(t.start),new Date(t.end)))):r.a.createElement(K.default,{variant:"subtitle2",color:"error",noWrap:!0},n("Timetable.cancelled")),r.a.createElement(K.default,{variant:"h6",color:"textPrimary",noWrap:!0},xe(t.subject).pretty)),secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(K.default,{variant:"body2",color:"textSecondary",noWrap:!0},t.location),r.a.createElement(K.default,{variant:"body2",color:"textSecondary",noWrap:!0},t.organizer))})):null},Bt=function(e){var t=e.end,a=e.start,n=Object(m.useI18n)().t,o=qt(t,a),i=t.getHours()>11&&a.getHours()<14;return r.a.createElement(Me.default,{button:!0,style:{backgroundColor:"var(--secondaryBackground)",height:92,borderRadius:8,marginLeft:4,marginRight:4,width:"calc(100% - 8px)"}},r.a.createElement(Rt,{color:"var(--secondaryColor)",style:{opacity:.3,marginLeft:-4}}),r.a.createElement(Le.default,{primary:n(i?"Timetable.pauseMidday":"Timetable.pauseNoCourses"),secondary:"".concat(n("Timetable.during")," ").concat(o)}))},Gt=function(e){var t,a,n,o,i,l=e.day,c=e.timetable,s=e.index,d=Object(m.useI18n)().t,f=Object(u.default)().isMobile,p=null!==(t=null===(a=null!==(n=c.find((function(e){return e.date===l.toISOString()})))&&void 0!==n?n:{courses:[]})||void 0===a?void 0:a.courses)&&void 0!==t?t:[];return r.a.createElement("div",{key:l.toISOString(),style:{overflowX:"hidden"},className:"u-flex u-flex-column u-w-100 u-h-100"},r.a.createElement(Pe.default,null,r.a.createElement(Fe.a,{style:f?{borderRadius:0}:{borderTopLeftRadius:0===s?8:0,borderBottomLeftRadius:0===s?8:0,borderTopRightRadius:4===s?8:0,borderBottomRightRadius:4===s?8:0}},l.toLocaleDateString("default",{weekday:"long",day:"2-digit"})),p.map((function(e,t){return r.a.createElement("div",{key:e._id,style:{margin:f?"-4px 4px":"0"}},r.a.createElement(Nt,{course:e,key:e._id}),p[t+1]&&new Date(e.end).getTime()+36e5<new Date(p[t+1].start).getTime()&&r.a.createElement(Bt,{end:new Date(e.end),start:new Date(p[t+1].start)}))})),0===(null===(o=null!==(i=c.find((function(e){return e.date===l.toISOString()})))&&void 0!==i?i:{courses:[]})||void 0===o?void 0:o.courses.length)&&r.a.createElement("div",{className:"u-flex u-flex-column u-flex-justify-center u-flex-items-center u-p-1 u-w-100"},r.a.createElement(K.default,{variant:"body2",color:"textSecondary"},d("Timetable.noCourses")))))};function Wt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Yt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(a),!0).forEach((function(t){ve()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ht=function(){var e,t,a,o,l=Object(m.useI18n)().t,c=Object(u.default)().isMobile,s=j().currentAccount,d=Object(n.useState)(new Date),f=y()(d,2),p=f[0],b=f[1],v=Object(n.useMemo)((function(){var e=new Date(p);return e.setDate(e.getDate()+6),e}),[p]),h={definition:function(){return Object(i.Q)("io.cozy.calendar.events").where({cozyMetadata:{sourceAccountIdentifier:t},start:o?{$lte:o,$gte:a}:{$gte:a}}).indexFields(["cozyMetadata.sourceAccountIdentifier","start"])},options:{as:"io.cozy.calendar.events/account/"+(t=null==s||null===(e=s.cozyMetadata)||void 0===e?void 0:e.sourceAccountIdentifier)+"/start/"+(a=p)+"/end/"+(o=v),fetchPolicy:g}},E=Object(i.useQuery)(h.definition,h.options),x=E.data,O=E.fetchStatus,_=Object(n.useMemo)((function(){return He()(Array(6).keys()).map((function(e){var t=new Date(p);return t.setDate(t.getDate()+e),t.setHours(0,0,0,0),t}))}),[p]),w=Object(n.useMemo)((function(){return(null!=x?x:[]).reduce((function(e,t){var a=new Date(t.start);a.setHours(0,0,0,0);var n=a.toISOString();return e.find((function(e){return e.date===n}))?e.map((function(e){return e.date===n?Yt(Yt({},e),{},{courses:[].concat(He()(e.courses),[t])}):e})):[].concat(He()(e),[{date:a.toISOString(),courses:[t]}])}),[])}),[x]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.b,null),r.a.createElement("div",null,r.a.createElement(dt,{title:l("Timetable.title")},r.a.createElement(It,{date:p,onDateChange:function(e){return b(e)},textVariant:"subtitle1"})),0!==w.length?r.a.createElement("div",{style:{flexDirection:c?"column":"row",padding:c?"0":"0 16px",marginTop:-8},className:"u-flex u-w-100 u-h-100"},(null!=_?_:[]).map((function(e,t){return 6!==e.getDay()||w.find((function(t){return t.date===e.toISOString()}))?r.a.createElement(Gt,{day:e,index:t,timetable:w,key:e.toISOString()}):null}))):r.a.createElement("div",{className:"u-flex u-flex-column u-flex-justify-center u-flex-items-center u-p-1 u-w-100 u-h-100"},"loading"===O?r.a.createElement($.a,null):r.a.createElement(K.default,{variant:"h6",color:"textSecondary"},l("Timetable.noCourses")))))},Jt=[{path:"",element:r.a.createElement(ye,null),children:[{path:"timetable",element:r.a.createElement(Ht,null),children:[{path:"course/:courseId",element:r.a.createElement(We,null)}]},{path:"homeworks",element:r.a.createElement(vt,null),children:[{path:"homework/:homeworkId",element:r.a.createElement(Ae,null)}]},{path:"grades",element:r.a.createElement(mt,null),children:[{path:"grade/:subjectId/:gradeId",element:r.a.createElement(Ie,null)}]},{path:"presence",element:r.a.createElement(_t,null)},{path:"",element:r.a.createElement(F.a,{replace:!0,to:"/timetable"})}]}],Qt=function(){var e=Object(I.b)(Jt);return r.a.createElement(I.a,{router:e})},Vt=a("BoVd"),Ut=a.n(Vt);document.addEventListener("DOMContentLoaded",(function(){var e,t,a,n,o;e=L(),t=e.root,a=e.client,n=e.lang,o=e.polyglot,t.render(r.a.createElement(O,{client:a,lang:n,polyglot:o},r.a.createElement(Qt,null),k()("debug")&&r.a.createElement(Ut.a,null)))}))},vaJB:function(e,t){e.exports="/img/pronote.93e57ca9d57ae065311dcae0a35e62a4.svg"},zsXZ:function(e,t){e.exports="/img/import-school.7e60fa0f81601afae8d4a65b1b48a175.svg"}});