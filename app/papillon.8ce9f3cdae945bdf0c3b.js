!function(e){function t(t){for(var n,l,o=t[0],c=t[1],s=t[2],d=0,m=[];d<o.length;d++)l=o[d],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&m.push(r[l][0]),r[l]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(u&&u(t);m.length;)m.shift()();return i.push.apply(i,s||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(i.splice(t--,1),e=l(l.s=a[0]))}return e}var n={},r={0:0},i=[];function l(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=n,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var o=window.webpackJsonp=window.webpackJsonp||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var s=0;s<o.length;s++)t(o[s]);var u=c;i.push([0,1]),a()}({0:function(e,t,a){a("jI5P"),e.exports=a("nXPL")},1:function(e,t){},2:function(e,t){},"2maa":function(e){e.exports=JSON.parse('{"Layout":{"onboardImportText":"Import your school data","importFromButton":"Import from","exploreServices":"Import from other sources"},"Sidebar":{"timetable":"Timetable","homeworks":"Homeworks","grades":"Grades","presence":"Attendance"},"Timetable":{"title":"Timetable","to":"to","start":"Start","end":"End","location":"Location","teacher":"Teacher","status":"Status","duration":"Duration","informations":"Informations","noCourses":"No courses","cancelled":"Cancelled course","pauseNoCourses":"No lessons","pauseMidday":"Midday break","during":"during"},"Homeworks":{"title":"Homeworks","emptyList":{"title":"No homeworks found","description":"There are no homeworks saved in your account"},"loadMore":"Load more homeworks"},"Grades":{"title":"Grades","dialogContext":"Informations","date":"Date","valuesList":"Results and averages","emptyList":{"title":"No grades","description":"You don\'t have any grades for this period","periods":"No available period"},"selectPeriod":"Select a period","selectYear":"Select a year","values":{"student":{"title":"Student\'s grade","description":"Grade you got for this subject"},"class":{"title":"Class average","description":"Class average for this subject"},"max":{"title":"Class best grade","description":"Best grade of the class for this subject"},"min":{"title":"Class worst grade","description":"Worst grade of the class for this subject"},"coefficient":{"title":"Coefficient","description":"Weight of this grade in your overall average"}}},"Presence":{"title":"Attendance","delay":"Delay","absence":"Absence","presence":"Event","justified":"Justified","notJustified":"Not justified","justifiedUnreceivable":"Justified (unreceivable)","emptyList":{"title":"No attendance events","description":"You don\'t have any attendance events"}}}')},"5z4W":function(e,t){e.exports={name:"Papillon",slug:"papillon",icon:"icon.svg",categories:[],version:"0.1.0",licence:"AGPL-3.0",editor:"",source:"https://github.com/cozy/cozy-papillon.git@build",developer:{name:"Cozy Cloud",url:"https://cozy.io"},routes:{"/":{folder:"/",index:"index.html",public:!1}},permissions:{apps:{description:"Required by the cozy-bar to display the icons of the apps",type:"io.cozy.apps",verbs:["GET"]},files:{type:"io.cozy.files",description:"Required by Papillon",verbs:["GET"]},calendar:{type:"io.cozy.calendar.*",description:"Required by Papillon",verbs:["GET"]},grades:{type:"io.cozy.timeseries.grades",description:"Required by Papillon",verbs:["GET"]},accounts:{type:"io.cozy.accounts",description:"Required by Papillon",verbs:["GET"]},identities:{type:"io.cozy.identities",description:"Required by Papillon",verbs:["GET"]}}}},"7SaY":function(e,t,a){},"7z1u":function(e,t,a){var n={"./_lib/build_formatting_tokens_reg_exp/index.js":"5XOE","./ar/build_distance_in_words_locale/index.js":"qs6D","./ar/build_format_locale/index.js":"80pQ","./ar/index.js":"n4NV","./be/build_distance_in_words_locale/index.js":"b7Vp","./be/build_format_locale/index.js":"STnx","./be/index.js":"ka/z","./bg/build_distance_in_words_locale/index.js":"fyh8","./bg/build_format_locale/index.js":"STBG","./bg/index.js":"BBHR","./ca/build_distance_in_words_locale/index.js":"4d8B","./ca/build_format_locale/index.js":"a88X","./ca/index.js":"Nz94","./cs/build_distance_in_words_locale/index.js":"70Ht","./cs/build_format_locale/index.js":"R/Ak","./cs/index.js":"oAfY","./da/build_distance_in_words_locale/index.js":"HjC7","./da/build_format_locale/index.js":"G0Zw","./da/index.js":"CJpN","./de/build_distance_in_words_locale/index.js":"DD2N","./de/build_format_locale/index.js":"pnJo","./de/index.js":"eBmD","./el/build_distance_in_words_locale/index.js":"tFqT","./el/build_format_locale/index.js":"twcE","./el/index.js":"m1rb","./en/build_distance_in_words_locale/index.js":"bjbr","./en/build_format_locale/index.js":"EW2Y","./en/index.js":"VkMk","./eo/build_distance_in_words_locale/index.js":"ujJO","./eo/build_format_locale/index.js":"S5Gq","./eo/index.js":"nn7U","./es/build_distance_in_words_locale/index.js":"h+mB","./es/build_format_locale/index.js":"Q4jc","./es/index.js":"4yJR","./fi/build_distance_in_words_locale/index.js":"Fpie","./fi/build_format_locale/index.js":"LTnX","./fi/index.js":"G/Qn","./fil/build_distance_in_words_locale/index.js":"VRy5","./fil/build_format_locale/index.js":"syEd","./fil/index.js":"k8V/","./fr/build_distance_in_words_locale/index.js":"nJeE","./fr/build_format_locale/index.js":"DeP4","./fr/index.js":"+owv","./hr/build_distance_in_words_locale/index.js":"Fs/O","./hr/build_format_locale/index.js":"ZlNX","./hr/index.js":"Kj+b","./hu/build_distance_in_words_locale/index.js":"8okG","./hu/build_format_locale/index.js":"lk8B","./hu/index.js":"+KHA","./id/build_distance_in_words_locale/index.js":"50BR","./id/build_format_locale/index.js":"18Vb","./id/index.js":"anKN","./is/build_distance_in_words_locale/index.js":"qUeK","./is/build_format_locale/index.js":"IcCt","./is/index.js":"4QE/","./it/build_distance_in_words_locale/index.js":"PCcA","./it/build_format_locale/index.js":"V71f","./it/index.js":"qK4z","./ja/build_distance_in_words_locale/index.js":"5vSx","./ja/build_format_locale/index.js":"CAsz","./ja/index.js":"XcQu","./ko/build_distance_in_words_locale/index.js":"jKsw","./ko/build_format_locale/index.js":"UEmh","./ko/index.js":"zOJj","./mk/build_distance_in_words_locale/index.js":"fcCd","./mk/build_format_locale/index.js":"re9F","./mk/index.js":"FDmM","./nb/build_distance_in_words_locale/index.js":"aEqN","./nb/build_format_locale/index.js":"pNMw","./nb/index.js":"mR4k","./nl/build_distance_in_words_locale/index.js":"7u2d","./nl/build_format_locale/index.js":"3riD","./nl/index.js":"06P9","./pl/build_distance_in_words_locale/index.js":"rygU","./pl/build_format_locale/index.js":"july","./pl/index.js":"vOlg","./pt/build_distance_in_words_locale/index.js":"sLR+","./pt/build_format_locale/index.js":"ZP65","./pt/index.js":"vSZg","./ro/build_distance_in_words_locale/index.js":"eJyG","./ro/build_format_locale/index.js":"fLwW","./ro/index.js":"OuEP","./ru/build_distance_in_words_locale/index.js":"KjgK","./ru/build_format_locale/index.js":"Tqgg","./ru/index.js":"T3Gn","./sk/build_distance_in_words_locale/index.js":"38t1","./sk/build_format_locale/index.js":"myxh","./sk/index.js":"In70","./sl/build_distance_in_words_locale/index.js":"Mhi5","./sl/build_format_locale/index.js":"yfgk","./sl/index.js":"D9r0","./sr/build_distance_in_words_locale/index.js":"I8h+","./sr/build_format_locale/index.js":"0FXG","./sr/index.js":"lQaB","./sv/build_distance_in_words_locale/index.js":"z6xu","./sv/build_format_locale/index.js":"jmSq","./sv/index.js":"SMJc","./th/build_distance_in_words_locale/index.js":"qHE1","./th/build_format_locale/index.js":"+W4l","./th/index.js":"5DsP","./tr/build_distance_in_words_locale/index.js":"0z6Z","./tr/build_format_locale/index.js":"NK/q","./tr/index.js":"OevD","./zh_cn/build_distance_in_words_locale/index.js":"SBqD","./zh_cn/build_format_locale/index.js":"219J","./zh_cn/index.js":"QhI5","./zh_tw/build_distance_in_words_locale/index.js":"7Fp2","./zh_tw/build_format_locale/index.js":"l09L","./zh_tw/index.js":"TDp1"};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id="7z1u"},Hsuv:function(e){e.exports=JSON.parse('{"Layout":{"onboardImportText":"Importez vos donnÃ©es scolaires","importFromButton":"Importer depuis","exploreServices":"Importer depuis d\'autres sources"},"Sidebar":{"timetable":"Emploi du temps","homeworks":"Travail Ã  faire","grades":"Notes","presence":"Vie scolaire"},"Timetable":{"title":"Emploi du temps","to":"au","start":"DÃ©but","end":"Fin","location":"Lieu","teacher":"Professeur","status":"Statut","duration":"DurÃ©e","informations":"Informations","noCourses":"Aucun cours","cancelled":"Cours annulÃ©","pauseNoCourses":"Pas de cours","pauseMidday":"Pause mÃ©ridienne","during":"pendant"},"Homeworks":{"title":"Travail Ã  faire","emptyList":{"title":"Aucun devoir","description":"Il n\'y a pas de devoirs sauvegardÃ©s dans votre compte"},"loadMore":"Charger plus de devoirs"},"Grades":{"title":"Notes","dialogContext":"Informations","date":"Date","valuesList":"RÃ©sultats et moyennes","emptyList":{"title":"Aucune note disponible","description":"Vous n\'avez pas de notes pour cette pÃ©riode","periods":"Aucune pÃ©riode disponible"},"selectPeriod":"SÃ©lectionner une pÃ©riode","selectYear":"SÃ©lectionner une annÃ©e","values":{"student":{"title":"Note de l\'Ã©lÃ¨ve","description":"Votre note obtenue pour ce sujet"},"class":{"title":"Moyenne de la classe","description":"La moyenne de la classe pour ce sujet"},"max":{"title":"Note haute de la classe","description":"La meilleure note de la classe pour ce sujet"},"min":{"title":"Note basse de la classe","description":"La moins bonne note de la classe pour ce sujet"},"coefficient":{"title":"Coefficient","description":"Poids de cette note dans le calcul de la moyenne gÃ©nÃ©rale"}}},"Presence":{"title":"Vie scolaire","delay":"Retard","absence":"Absence","presence":"Ã‰vÃ¨nement","justified":"JustifiÃ©(e)","notJustified":"InjustifiÃ©(e)","justifiedUnreceivable":"Motif non valable","emptyList":{"title":"Aucun Ã©venement","description":"Vous n\'avez pas d\'Ã©venements de vie scolaire"}}}')},NcLS:function(e,t){e.exports="/img/ecoledirecte.844127d5e99136b4e7b27ad724127047.svg"},eUFy:function(e,t,a){var n={"./en":"2maa","./en.json":"2maa","./fr":"Hsuv","./fr.json":"Hsuv"};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id="eUFy"},nXPL:function(e,t,a){"use strict";a.r(t);a("k37E"),a("QLHQ"),a("oULE"),a("7SaY");var n=a("ivGQ"),r=a.n(n),i=a("p/pw"),l=a("xEu0"),o=a.n(l),c=a("HROS"),s=a("vTbG"),u=a("Rx+m"),d=a("5LIP"),m=a("Aaol"),f=a("0Lot"),p=a("BqmN"),b=a("XkwL"),y=a.n(b),g=o.a.fetchPolicies.olderThan(54e4),v=Object(n.createContext)(),h=function(){return r.a.useContext(v)},j=function(e){var t=e.children,a=Object(n.useState)(null),i=y()(a,2),o=i[0],c=i[1],s={definition:function(){return Object(l.Q)("io.cozy.identities").where({cozyMetadata:{createdByApp:"pronote"}}).indexFields(["cozyMetadata.createdByApp"])},options:{as:"io.cozy.identities/pronote",fetchPolicy:g}},u=Object(l.useQuery)(s.definition,s.options),d=u.data,m=u.fetchStatus,f=Object(n.useState)([]),p=y()(f,2),b=p[0],h=p[1];return Object(n.useEffect)((function(){if("loaded"===m){var e=d;e.sort((function(e,t){return new Date(t.cozyMetadata.createdAt)-new Date(e.cozyMetadata.createdAt)})),h(e)}}),[m]),Object(n.useEffect)((function(){b.length>0&&!o&&c(b[0])}),[b]),r.a.createElement(v.Provider,{value:{currentAccount:o,setCurrentAccount:c,accountsList:b,setAccountsList:h,fetchStatus:m}},t)},E=Object(f.a)({disableGlobal:!0}),x=function(e){var t=e.client,a=e.lang,n=e.polyglot,o=e.children;return r.a.createElement(c.WebviewIntentProvider,null,r.a.createElement(p.b,{generateClassName:E},r.a.createElement(l.CozyProvider,{client:t},r.a.createElement(i.BarProvider,null,r.a.createElement(m.I18n,{lang:a,polyglot:n},r.a.createElement(d.default,null,r.a.createElement(u.BreakpointsProvider,null,r.a.createElement(j,null,r.a.createElement(s.a,null,o)))))))))},_=a("euuj"),O=a.n(_),w=a("iOQm"),D={timetable:{doctype:"io.cozy.calendar.events"},homeworks:{doctype:"io.cozy.calendar.todos"},grades:{doctype:"io.cozy.timeseries.grades"},presence:{doctype:"io.cozy.calendar.presence"}},S=a("8ZpT"),C=a.n(S),P=a("8XZk"),k=a("5z4W"),M=a.n(k),z=O()((function(){var e,t,n,r=document.querySelector("[role=application]"),i=Object(w.createRoot)(r),l=function(e){var t=JSON.parse(e.dataset.cozy),a=window.location.protocol,n="".concat(a,"//").concat(t.domain);return new o.a({uri:n,token:t.token,appMetadata:{slug:M.a.name,version:M.a.version},schema:D,store:!0})}(r),c=null===(e=JSON.parse(r.dataset.cozy))||void 0===e?void 0:e.locale,s=(n="en",/^\{\{\..*\}\}$/.test(t=c)?n:t),u=Object(P.b)(s,(function(e){return a("eUFy")("./".concat(e))}));return l.registerPlugin(C.a.plugin),{root:i,client:l,lang:s,polyglot:u}})),L=a("P0ff"),I=a("Iyno"),F=a("uRLs"),q=a.n(F),A=a("pvOl"),T=a("4XnK"),N=a("HYTT"),R=a("keV2"),B=a("WY6r"),G=a("Gyqq"),Y=a("lTBH"),W=a("d5dM"),J=a("9Ub/"),H=a("N8wp"),Q=a("INxB"),V=a("bVLx"),U=a("J14j"),$=a("dUf/"),X=function(){var e,t,a,i,l=h(),o=l.currentAccount,c=l.setCurrentAccount,s=l.accountsList,u=(l.setAccountsList,Object(n.useState)(!1)),d=y()(u,2),m=d[0],f=d[1],p=Object(n.useRef)(null);return!s||s.length<2?null:r.a.createElement("div",null,r.a.createElement(U.a,{ref:p,onClick:function(){return f(!0)}},r.a.createElement(J.default,{noWrap:!0,variant:"h4",color:"textPrimary"},null==o||null===(e=o.contact)||void 0===e||null===(t=e.name)||void 0===t?void 0:t.givenName," ",null==o||null===(a=o.contact)||void 0===a||null===(i=a.name)||void 0===i?void 0:i.familyName)),r.a.createElement(V.a,{open:m,anchorEl:p.current,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},keepMounted:!0,onClose:function(){return f(!1)}},s.map((function(e){var t,a,n,i,l,s,u;return r.a.createElement(Q.a,{key:e._id,onClick:function(){c(e),f(!1)},selected:(null==o?void 0:o._id)===e._id},r.a.createElement("div",{style:{minWidth:42,width:42,height:20,display:"flex",alignItems:"center",justifyContent:"center",border:"0px solid var(--secondaryColorLightest)",backgroundColor:"var(--secondaryColorLightest)",borderRadius:"5px"}},r.a.createElement("p",{style:{width:"100%",textAlign:"center",fontSize:"12.5px",color:"var(--secondaryTextColor)",fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},(u=null==e||null===(t=e.contact)||void 0===t?void 0:t.jobTitle).includes("de")?u.split("de")[1].trim():u)),r.a.createElement($.default,null,r.a.createElement(J.default,{variant:"body1",color:"textPrimary",style:{fontWeight:600}},null==e||null===(a=e.contact)||void 0===a||null===(n=a.name)||void 0===n?void 0:n.givenName," ",null==e||null===(i=e.contact)||void 0===i||null===(l=i.name)||void 0===l?void 0:l.familyName),r.a.createElement(J.default,{variant:"body2",color:"textSecondary"},null==e||null===(s=e.contact)||void 0===s?void 0:s.company)))}))))},K=a("/s+K"),Z=a("/5Aj"),ee=a("zsXZ"),te=a.n(ee),ae=a("vaJB"),ne=a.n(ae),re=(a("NcLS"),function(){var e=Object(m.useI18n)().t;return r.a.createElement("div",{className:"u-db-s u-flex u-flex-column u-items-center u-justify-center u-p-2"},r.a.createElement(Z.a,{icon:r.a.createElement("img",{src:te.a,style:{height:208}}),iconSize:"large",title:e("Layout.onboardImportText")},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginTop:"0.8rem"}},r.a.createElement(K.default,{variant:"secondary",label:e("Layout.importFromButton")+" Pronote",startIcon:r.a.createElement("img",{src:ne.a,alt:"Pronote"}),style:{width:"100%"},onClick:function(){}}),r.a.createElement(K.default,{variant:"ghost",label:e("Layout.exploreServices"),style:{width:"100%"}}))))}),ie=Object(G.e)((function(e){var t=e.children,a=e.className,n=e.active,i=e.activeClassName,l=e.onClick;return r.a.createElement("a",{onClick:l,className:q()(a,n?i:null)},t)})),le=function(){var e=Object(m.useI18n)().t,t=Object(u.default)().isMobile,a=Object(l.useClient)(),n=Object(L.o)(),o=Object(L.m)().pathname.slice(1),c=h(),s=(c.currentAccount,c.setCurrentAccount,c.accountsList),d=(c.setAccountsList,c.fetchStatus),f=function(e){return{onClick:function(){n("/"+e.join("/"))},active:o.includes(e[0])}};return 0==s.length?r.a.createElement(B.b,null,r.a.createElement(i.BarComponent,null),r.a.createElement(B.c,null,r.a.createElement(B.a,null,"loaded"===d?r.a.createElement(re,null):r.a.createElement(Y.a,null)))):r.a.createElement(B.b,null,r.a.createElement(W.a,{style:t?{overflow:"hidden"}:{}},r.a.createElement(G.d,null,r.a.createElement(G.b,null,r.a.createElement(ie,f(["timetable"]),r.a.createElement(G.a,{icon:A.a}),r.a.createElement(G.c,null,e("Sidebar.timetable")))),r.a.createElement(G.b,null,r.a.createElement(ie,f(["homeworks"]),r.a.createElement(G.a,{icon:T.a}),r.a.createElement(G.c,null,e("Sidebar.homeworks")))),r.a.createElement(G.b,null,r.a.createElement(ie,f(["grades"]),r.a.createElement(G.a,{icon:N.a}),r.a.createElement(G.c,null,e("Sidebar.grades")))),r.a.createElement(G.b,null,r.a.createElement(ie,f(["presence"]),r.a.createElement(G.a,{icon:R.a}),r.a.createElement(G.c,null,e("Sidebar.presence")))))),r.a.createElement(i.BarComponent,null),r.a.createElement(B.c,null,r.a.createElement(B.a,null,t&&r.a.createElement(i.BarCenter,null,r.a.createElement(J.default,{variant:"h5"},a.appMetadata.slug)),r.a.createElement(L.b,null))),r.a.createElement(H.a,{t:e}))},oe=a("QGb3"),ce=a.n(oe),se=a("F7WE"),ue=a("OEPu"),de=a("J58c"),me=a.n(de);function fe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function pe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(a),!0).forEach((function(t){me()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var be=[{label:"accompagnementperso",pretty:"Accompagnement personnalisÃ©",formats:{default:["accompagnement personnalise","accompagnemt perso"]},emoji:"ðŸ¤"},{label:"atprofessionnalis",pretty:"Atelier de professionnalisation",formats:{default:["atelier de professionnalisation","at professionnalis"]},emoji:"ðŸ”§"},{label:"artsplastiques",pretty:"Arts plastiques",formats:{default:["arts plastiques","artsplastiques"]},emoji:"ðŸŽ¨"},{label:"bloc1smdsi",pretty:"Bloc 1 : Support et mise a disposition des services informatiques",formats:{default:["bloc 1 support et mise a disposition des services informatiques","bloc 1 smdsi"]},emoji:"ðŸ’»"},{label:"bloc2sisr",pretty:"Bloc 2 : Solutions dâ€™infrastructure systemes et rÃ©seaux",formats:{default:["bloc 2 solutions dâ€™infrastructure systemes et reseaux","bloc 2 sisr"]},emoji:"ðŸ”Œ"},{label:"bloc2slam",pretty:"Bloc 2 : Solutions logicielles et applications mÃ©tiers",formats:{default:["bloc 2 solutions logicielles et applications metiers","bloc 2 slam"]},emoji:"ðŸ“±"},{label:"bloc3tp",pretty:"Bloc 3 : Travaux pratiques",formats:{default:["bloc 3 travaux pratiques","bloc 3 tp"]},emoji:"ðŸ› ï¸"},{label:"culecojurmanapp",pretty:"Culture Ã©conomique, juridique et managÃ©riale appliquÃ©e",formats:{default:["culture economique juridique et manageriale appliquee","cul eco jur man app"]},emoji:"ðŸ’¼"},{label:"culturegeneetexpr",pretty:"Culture gÃ©nerale et expression",formats:{default:["culture generale et expression","culture gene et expr"]},emoji:"ðŸ“š"},{label:"cultecojurmanag",pretty:"Culture Ã©conomique, juridique et managÃ©riale",formats:{default:["culture economique juridique et manageriale","cult eco jur manag"]},emoji:"ðŸ’¼"},{label:"dnlsesanglais",pretty:"DNL : Sciences Ã©conomiques et sociales en anglais",formats:{default:["dnl ses anglais"]},emoji:"ðŸ‡¬ðŸ‡§"},{label:"educationcivique",pretty:"Ã‰ducation civique",formats:{default:["education civique","education civique"]},emoji:"ðŸ—³ï¸"},{label:"enseignscientifique",pretty:"Enseignement scientifique",formats:{default:["enseignement scientifique","enseign scientifique"]},emoji:"ðŸ”¬"},{label:"edphysiquesport",pretty:"Ã‰ducation physique & sportive",formats:{default:["education physique et sportive","ed physique sport","education physique et sportive","eps"]},emoji:"ðŸƒ"},{label:"educationmusicale",pretty:"Ã‰ducation musicale",formats:{default:["education musicale","education musicale"]},emoji:"ðŸŽµ"},{label:"francais",pretty:"FranÃ§ais",formats:{default:["franÃ§ais","francais"]},emoji:"ðŸ“"},{label:"histoiregeo",pretty:"Histoire-GÃ©ographie",formats:{default:["histoire geographie","histoire geo","histoire geograph","histoire-geographie","histoire-geographie"]},emoji:"ðŸŒ"},{label:"humanlitterphilo",pretty:"Humanites, LittÃ©rature & Philosophie",formats:{default:["humanites litterature philosophie","human litter philo"]},emoji:"ðŸ“–"},{label:"llcanglmondcont",pretty:"LLCER Anglais Monde Contemporain",formats:{default:["llcer anglais monde contemporain","llc angl mond cont"]},emoji:"ðŸ‡¬ðŸ‡§"},{label:"mathspourinformatq",pretty:"MathÃ©matiques pour lâ€™Informatique",formats:{default:["mathematiques pour lâ€™informatique","maths pour informatq"]},emoji:"ðŸ§®"},{label:"mathematiques",pretty:"MathÃ©matiques",formats:{default:["mathematiques","mathematiques","mathematiques 1ere","math 1ere"]},emoji:"ðŸ“"},{label:"numeriquescinform",pretty:"NumÃ©rique & Sciences Informatiques",formats:{default:["numerique et sciences informatiques","numerique sc inform"]},emoji:"ðŸ’»"},{label:"physiquechimie",pretty:"Physique-Chimie",formats:{default:["physique chimie","phys chim"]},emoji:"âš›ï¸"},{label:"sceconosociales",pretty:"Sciences Ã‰conomiques & Sociales",formats:{default:["sciences economiques et sociales","sc econo sociales","sciences economiques et sociales"]},emoji:"ðŸ’°"},{label:"sciencesvieterre",pretty:"Sciences de la Vie & de la Terre",formats:{default:["sciences de la vie et de la terre","sciences de la vie et de la terre","sciences vie terre"]},emoji:"ðŸŒ¿"},{label:"scnumeriqtechnol",pretty:"Sciences NumÃ©riques & Technologie",formats:{default:["sciences numeriques et technologie","sc numeriq technol"]},emoji:"ðŸ’»"},{label:"viedeclasse",pretty:"Vie de classe",formats:{default:["vie de classe","vie de classe"]},emoji:"ðŸ‘¥"}],ye=function(e){var t,a,n={expressionecrite:"expression Ã©crite",expressionorale:"expression orale",comprehensionorale:"comprÃ©hension orale",comprehensionecrite:"comprÃ©hension Ã©crite",ecrit:"Ã©crit",oral:"oral"},r=e.toLowerCase().split(new RegExp(Object.keys(n).join("|")))[0].replace("ensscientifique",""),i=be.find((function(e){return e.label===r})),l=(null===(t=Object.entries(n).find((function(t){var a=y()(t,1)[0];return e.includes(a)})))||void 0===t?void 0:t[1])||"";return i?pe(pe({},i),{},{speciality:l}):{label:e,pretty:(a=r,a.length<4?a.toUpperCase():a.charAt(0).toUpperCase()+a.slice(1)),formats:{default:[e]},speciality:l}},ge=a("xr2j"),ve=a("4jS1"),he=a("i5f2"),je=function(e){var t=e.grade,a=e.j,n=e.subject,i={cozyGradeChip:{display:"flex",alignItems:"flex-end"}},l=Object(L.o)();return r.a.createElement("div",{key:t.id},r.a.createElement(ve.default,{button:!0,onClick:function(){l("/grades/grade/".concat(n._id,"/").concat(t.id))},style:{borderRadius:8}},r.a.createElement(he.default,null,r.a.createElement(J.default,{variant:"h3",color:"textPrimary"},ye(n.subject).emoji||"ðŸ“š")),r.a.createElement($.default,{primary:t.label||"Note sans titre",secondary:new Date(t.date).toLocaleDateString("default",{year:"numeric",month:"long",day:"numeric"})}),r.a.createElement("div",{className:"cozy-grade-chip",style:i.cozyGradeChip},r.a.createElement(J.default,{variant:"body2",color:"textPrimary"},parseFloat(t.value.student).toFixed(2)),r.a.createElement(J.default,{variant:"body2",color:"textSecondary"},"/",parseFloat(t.value.outOf).toFixed(0)))),a!==n.series.length-1&&r.a.createElement(ge.a,{component:"li",variant:"inset"}))},Ee=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F7B731","#6A5ACD","#FF69B4","#20B2AA","#FF7F50","#9370DB","#3CB371","#FF4500","#1E90FF","#FFD700","#8A2BE2","#32CD32","#FF1493","#00CED1","#FF8C00","#7B68EE","#00FA9A","#DC143C","#1ABC9C","#F39C12","#8E44AD","#2ECC71","#E74C3C","#3498DB","#F1C40F","#9B59B6","#2980B9","#E67E22","#27AE60","#D35400"];function xe(e,t){if(0===e.length)return null;var a=function(e){for(var t=0,a=0;a<e.length;a++)t=Math.imul(31,t)+e.charCodeAt(a)|0;return function(){return(((t=Math.imul(31,t)+1|0)^t>>>15)>>>0)/4294967296}}(t);return e[Math.floor(a()*e.length)]}var _e=function(e){return xe(Ee,e)},Oe=a("MRub"),we=function(e){var t=e.subject,a=Object(u.default)().isMobile;return r.a.createElement(Oe.a,{style:{borderRadius:a?0:8}},r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"10px"}},r.a.createElement("div",{style:{display:"flex",alignItems:"center",gap:"14px",flex:1,width:"100%",overflow:"hidden"}},r.a.createElement("div",{style:{width:"8px",height:"8px",backgroundColor:_e(t.subject),borderRadius:"50px"}}),r.a.createElement(J.default,{variant:"subtitle1",color:"textSecondary",noWrap:!0},ye(t.subject).pretty||""),r.a.createElement(J.default,{variant:"caption",color:"textSecondary",noWrap:!0},ye(t.subject).speciality||"")),r.a.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},r.a.createElement(J.default,{variant:"body1",color:"textPrimary",style:{fontWeight:"bold"}},parseFloat(t.aggregation.avgGrades).toFixed(2)),r.a.createElement(J.default,{variant:"body2",color:"textSecondary",style:{marginBottom:.5}},"/20"))))},De=a("gQXR"),Se=a("gtDA"),Ce=a("1Crc"),Pe=function(e){var t=e.periodDropdownRef,a=e.selectedPeriod,n=e.setSelectedPeriod,i=e.setPeriodMenuOpen,l=e.periodMenuOpen,o=e.periods,c=e.t,s=e.textVariant,d=Object(u.default)().isMobile;return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{ref:t,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(){return i(!l)},textVariant:s,style:{height:"100%",paddingLeft:16,width:d?"100%":"auto"}},a||c("Grades.selectPeriod")),r.a.createElement(Se.a,{open:l,anchorEl:t.current,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},keepMounted:!0,onClose:function(){return i(!1)}},o.map((function(e,t){return r.a.createElement(Ce.a,{key:t,onClick:function(){n(e),i(!1)},selected:e===a},r.a.createElement($.default,{primary:e}))})),0===o.length&&r.a.createElement(Ce.a,{disabled:!0},r.a.createElement($.default,{primary:c("Grades.emptyList.periods")}))))},ke=function(e){var t=e.yearDropdownRef,a=e.selectedYear,n=e.selectedPeriod,i=e.setSelectedYear,l=e.setYearMenuOpen,o=e.yearMenuOpen,c=e.allPeriods,s=e.t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{ref:t,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(){return l(!o)},style:{height:"100%",paddingRight:16}},a||s("Grades.selectYear")),r.a.createElement(Se.a,{open:o,anchorEl:t.current,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},keepMounted:!0,onClose:function(){return l(!1)}},ce()(new Set(c.filter((function(e){return e.title===n})).map((function(e){return e.year})))).map((function(e,t){return r.a.createElement(Ce.a,{key:t,onClick:function(){i(e),l(!1)},selected:e===a},r.a.createElement($.default,{primary:e}))}))))},Me=function(e){var t=e.periodDropdownRef,a=e.yearDropdownRef,n=e.selectedPeriod,i=e.setSelectedPeriod,l=e.selectedYear,o=e.setSelectedYear,c=e.setPeriodMenuOpen,s=e.periodMenuOpen,d=e.setYearMenuOpen,m=e.yearMenuOpen,f=e.allPeriods,p=e.periods,b=e.years,y=e.t,g=Object(u.default)().isMobile;return r.a.createElement(De.a,{elevation:4,style:{height:40,padding:"0 8px",overflow:"hidden",borderRadius:40,display:"flex",gap:"16px",alignItems:"center",justifyContent:"center",width:g?"100%":"auto"}},r.a.createElement(Pe,{periodDropdownRef:t,selectedPeriod:n,setSelectedPeriod:i,setPeriodMenuOpen:c,periodMenuOpen:s,periods:p,t:y}),r.a.createElement(ke,{yearDropdownRef:a,selectedYear:l,setSelectedYear:o,setYearMenuOpen:d,yearMenuOpen:m,allPeriods:f,selectedPeriod:n,years:b,t:y}))},ze=function(e){e.title;var t=e.children,a=(e.loading,Object(u.default)().isMobile);return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(i.BarCenter,null,r.a.createElement(X,null)),!a||t?r.a.createElement(De.a,{square:!0,elevation:0,style:{height:68,minHeight:68},className:"u-p-1 u-w-100 u-flex u-flex-row u-flex-items-center u-flex-justify-between"},!a&&r.a.createElement(X,null),t):null)},Le=function(){var e,t,a,i=Object(m.useI18n)().t,o=Object(u.default)().isMobile,c=h().currentAccount,s={definition:function(){return Object(l.Q)("io.cozy.timeseries.grades").where({title:a||{$gt:null},cozyMetadata:{sourceAccountIdentifier:t}}).indexFields(["cozyMetadata.sourceAccountIdentifier","title"])},options:{as:"io.cozy.timeseries.grades/account/"+(t=null==c||null===(e=c.cozyMetadata)||void 0===e?void 0:e.sourceAccountIdentifier)+"/period/"+a,fetchPolicy:g}},d=Object(l.useQuery)(s.definition,s.options),f=d.data,p="loading"==d.fetchStatus,b=ce()(new Set((null!=f?f:[]).map((function(e){return{title:e.title,year:new Date(e.startDate).getFullYear()}}))));b.sort((function(e,t){return"Hors pÃ©riode"===e.title?1:"Hors pÃ©riode"===t.title?-1:0}));var v=ce()(new Set((null!=b?b:[]).map((function(e){return e.title})))),j=ce()(new Set((null!=b?b:[]).map((function(e){return e.year})))),E=Object(n.useState)(""),x=y()(E,2),_=x[0],O=x[1],w=Object(n.useState)(""),D=y()(w,2),S=D[0],C=D[1];Object(n.useEffect)((function(){_&&S&&function(e,t){if(!b.some((function(a){return a.title===e&&a.year===t}))){var a,n=null===(a=b.find((function(t){return t.title===e})))||void 0===a?void 0:a.year;n&&C(n)}}(_,S)}),[_,S]),""===_&&v.length>0&&O(v[0]),""===S&&j.length>0&&C(j[0]);var P=Object(n.useState)(!1),k=y()(P,2),M=k[0],z=k[1],I=Object(n.useState)(!1),F=y()(I,2),q=F[0],A=F[1],T=r.a.useRef(null),N=r.a.useRef(null);r.a.useRef(null),r.a.useRef(null);Object(n.useEffect)((function(){v.includes(_)||O(v[0])}),[f]);var R={periodDropdownRef:T,yearDropdownRef:N,selectedPeriod:_,setSelectedPeriod:O,selectedYear:S,setSelectedYear:C,setPeriodMenuOpen:z,periodMenuOpen:M,setYearMenuOpen:A,yearMenuOpen:q,allPeriods:b,periods:v,years:j,t:i};return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.b,null),r.a.createElement(ze,{title:i("Grades.title"),loading:p},r.a.createElement(Me,R)),0===(null!=f?f:[]).length&&!p&&r.a.createElement(Z.a,{icon:se.a,title:i("Grades.emptyList.title"),text:i("Grades.emptyList.description"),centered:!0}),(null!=f?f:[]).filter((function(e){return e.title===_})).filter((function(e){return new Date(e.startDate).getFullYear()===parseInt(S)})).map((function(e,t){return r.a.createElement(ue.default,{key:t,subheader:o?r.a.createElement(we,{subject:e}):r.a.createElement("div",null,r.a.createElement(we,{subject:e})),style:{marginLeft:o?"0px":"16px",marginRight:o?"0px":"16px"}},e.series.map((function(t,a){return r.a.createElement(je,{key:a,grade:t,j:a,subject:e})})),0==e.series.length&&r.a.createElement(Z.a,{icon:se.a,title:i("Grades.emptyList.title"),text:i("Grades.emptyList.description"),centered:!0}))})))},Ie=a("Yb2N"),Fe=a("AHiN"),qe=a("+XJ+"),Ae=a("oRW6"),Te=function(e){var t=e.event,a=e.j,n=e.group,i=Object(m.useI18n)().t;return r.a.createElement("div",{key:t._id},r.a.createElement(ve.default,{key:t._id,style:{borderRadius:8}},r.a.createElement(he.default,null,r.a.createElement(Fe.default,{icon:"DELAY"==t.xType?Ae.a:"ABSENCE"==t.xType?R.a:qe.a})),r.a.createElement($.default,{primary:r.a.createElement(r.a.Fragment,null,r.a.createElement(J.default,{variant:"h6",noWrap:!0},"DELAY"==t.xType?i("Presence.delay"):"ABSENCE"==t.xType?i("Presence.absence"):i("Presence.presence")),r.a.createElement(J.default,{variant:"body1",noWrap:!0},t.label)),secondary:r.a.createElement(J.default,{variant:"body2",color:"textSecondary",noWrap:!0},new Date(t.start).toLocaleString("default",{weekday:"short",month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}))}),r.a.createElement(Ie.a,{label:t.xJustified?i("Presence.justified"):t.label?i("Presence.justifiedUnreceivable"):i("Presence.notJustified"),color:t.xJustified?"success":t.label?"default":"error",disabled:!t.xJustified&&t.label})),a!==n.events.length-1&&r.a.createElement(ge.a,{component:"li",variant:"inset"}))};function Ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(a),!0).forEach((function(t){me()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ne(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Be=function(){var e,t,a=Object(m.useI18n)().t,n=Object(u.default)().isMobile,i=h().currentAccount,o={definition:function(){return Object(l.Q)("io.cozy.calendar.presence").where({start:{$gt:null},cozyMetadata:{sourceAccountIdentifier:t}}).sortBy([{start:"desc"}]).indexFields(["cozyMetadata.sourceAccountIdentifier","start"])},options:{as:"io.cozy.calendar.presence/account/"+(t=null==i||null===(e=i.cozyMetadata)||void 0===e?void 0:e.sourceAccountIdentifier),fetchPolicy:g}},c=Object(l.useQuery)(o.definition,o.options),s=c.data,d="loading"==c.fetchStatus,f=(null!=s?s:[]).reduce((function(e,t){var a=new Date(t.start).getMonth();return e.find((function(e){return e.month===a}))?e.map((function(e){return e.month===a?Re(Re({},e),{},{events:[].concat(ce()(e.events),[t])}):e})):[].concat(ce()(e),[{month:a,prettyMonth:new Date(t.start).toLocaleString("default",{month:"long",year:"numeric"}),events:[t]}])}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(ze,{title:a("Presence.title"),loading:d}),0===f.length&&!d&&r.a.createElement(Z.a,{icon:r.a.createElement(se.a,null),title:a("Presence.emptyList.title"),description:a("Presence.emptyList.description")}),f.map((function(e){return r.a.createElement(ue.default,{key:e.month,style:{marginTop:"-8px",marginLeft:n?"0px":"16px",marginRight:n?"0px":"16px"}},r.a.createElement(Oe.a,{style:{borderRadius:n?0:8}},r.a.createElement(J.default,{variant:"subtitle2",color:"textSecondary"},e.prettyMonth)),e.events.map((function(t,a){return r.a.createElement(Te,{key:t._id,event:t,j:a,group:e})})))}))))},Ge=a("13md"),Ye=a("2Kpg"),We=function(e){var t=e.hw,a=e.j,n=e.day,i=Object(L.o)();return r.a.createElement("div",{key:a},r.a.createElement(ve.default,{button:!0,onClick:function(){i("homework/".concat(t._id))},style:{borderRadius:8}},r.a.createElement(he.default,null,r.a.createElement(Ye.default,{checked:t.completed,disabled:!0})),r.a.createElement($.default,{primary:r.a.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},r.a.createElement("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:_e(t.subject)}}),r.a.createElement(J.default,{variant:"subtitle2",color:"textSecondary"},ye(t.subject).pretty)),secondary:r.a.createElement(J.default,{variant:"body1",color:"textPrimary",noWrap:!0},t.summary)})),a<n.hws.length-1&&r.a.createElement(ge.a,{component:"li",variant:"inset"}))};function Je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function He(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(a),!0).forEach((function(t){me()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Je(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Qe=function(){var e,t,a=Object(m.useI18n)().t,n=Object(u.default)().isMobile,i=h().currentAccount,o={definition:function(){return Object(l.Q)("io.cozy.calendar.todos").where({dueDate:{$gt:null},cozyMetadata:{sourceAccountIdentifier:t}}).sortBy([{dueDate:"desc"}]).indexFields(["cozyMetadata.sourceAccountIdentifier","dueDate"])},options:{as:"io.cozy.calendar.todos/account/"+(t=null==i||null===(e=i.cozyMetadata)||void 0===e?void 0:e.sourceAccountIdentifier),fetchPolicy:g}},c=Object(l.useQuery)(o.definition,o.options),s=c.data,d=c.fetchStatus,f=c.hasMore,p=c.fetchMore,b="loading"==d,y=(null!=s?s:[]).reduce((function(e,t){var a=t.dueDate.replace(/(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2})Z/,"$1-$2-$3T$4:$5:$6Z"),n=new Date(a),r=n.toISOString();return e.find((function(e){return e.date===r}))?e.map((function(e){return e.date===r?He(He({},e),{},{hws:[].concat(ce()(e.hws),[t])}):e})):[].concat(ce()(e),[{date:n.toISOString(),hws:[t]}])}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.b,null),r.a.createElement("div",null,r.a.createElement(ze,{title:a("Homeworks.title"),loading:b}),0===y.length&&!b&&r.a.createElement(Z.a,{icon:se.a,title:a("Homeworks.emptyList.title"),description:a("Homeworks.emptyList.description")}),r.a.createElement("div",{style:{height:"100%",overflow:"auto",overflowY:"scroll",padding:n?"0":"0 16px",marginTop:-8}},y.map((function(e,t){return r.a.createElement(ue.default,{key:t,className:e.current?"current":""},r.a.createElement(Oe.a,{style:{borderRadius:n?0:8}},r.a.createElement(J.default,{variant:"subtitle2",color:"textSecondary"},new Date(e.date).toLocaleDateString("default",{weekday:"long",month:"long",day:"numeric",year:"numeric"}))),e.hws.map((function(t,a){return r.a.createElement(We,{key:a,hw:t,j:a,day:e})})))})),f&&r.a.createElement(Ge.a,{label:a("Homeworks.loadMore"),fetchMore:p}))))},Ve=a("HCvV"),Ue=a("K4g+"),$e=a("Mb5X"),Xe=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Ke=function(e){var t=e.date,a=e.onDateChange,i=Object(n.useState)(new Date(t)),l=y()(i,2),o=l[0],c=l[1],s=Object(m.useI18n)().t,d=Object(u.default)().isMobile;Object(n.useEffect)((function(){a&&a(o)}),[o]);var f=Object(n.useState)(o.getDate()),p=y()(f,2),b=p[0],g=p[1],v=Object(n.useState)(o.getMonth()),h=y()(v,2),j=h[0],E=h[1],x=Object(n.useState)(o.getFullYear()),_=y()(x,2),O=_[0],w=_[1],D=r.a.useRef(null),S=r.a.useRef(null),C=r.a.useRef(null),P=Object(n.useState)(!1),k=y()(P,2),M=k[0],z=k[1],L=Object(n.useState)(!1),I=y()(L,2),F=I[0],q=I[1],A=Object(n.useState)(!1),T=y()(A,2),N=T[0],R=T[1],B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=new Date(o.getFullYear(),e,0);return a.setDate(a.getDate()+t),a.getDate()},G=function(e,t){for(var a=new Date(e,t,0).getDate(),n=[],r=1;r<=a;r++){1===new Date(e,t-1,r).getDay()&&n.push(r)}return n};Object(n.useEffect)((function(){var e=G(O,j+1),t=b;e.includes(b)||(t=e.reduce((function(e,t){return Math.abs(t-b)<Math.abs(e-b)?t:e}))),c(new Date(O,j,t))}),[b,j,O]);return r.a.createElement("div",{style:{display:"flex",gap:6,width:d?"100%":"auto"}},r.a.createElement(De.a,{elevation:4,style:{height:40,padding:"0 8px",overflow:"hidden",borderRadius:40,display:"flex",gap:"16px",alignItems:"center",justifyContent:"center",width:d?"100%":"auto"}},r.a.createElement(U.a,{ref:D,onClick:function(){return z(!0)},textVariant:"body1",style:{height:"100%",paddingLeft:16}},o.toLocaleDateString("default",{day:"2-digit"}),"-",(o.getDate()+6)%B(j)),r.a.createElement(U.a,{ref:S,onClick:function(){return q(!0)},textVariant:"body1",style:{height:"100%",width:d?"100%":"auto"}},Xe(o.toLocaleDateString("default",{month:"long"}))),r.a.createElement(U.a,{ref:C,onClick:function(){return R(!0)},textVariant:"body1",style:{height:"100%",paddingRight:16}},o.toLocaleDateString("default",{year:"numeric"}))),r.a.createElement(De.a,{elevation:4,style:{height:40,width:40,minWidth:40,overflow:"hidden",borderRadius:40,display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement(Ve.default,{size:"large",onClick:function(){return(e=new Date(o)).setDate(o.getDate()-7),void c(e);var e}},r.a.createElement(Fe.default,{icon:Ue.a}))),r.a.createElement(De.a,{elevation:4,style:{height:40,width:40,minWidth:40,overflow:"hidden",borderRadius:40,display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement(Ve.default,{size:"large",onClick:function(){return(e=new Date(o)).setDate(o.getDate()+7),void c(e);var e}},r.a.createElement(Fe.default,{icon:$e.default}))),r.a.createElement(Se.a,{open:M,anchorEl:D.current,keepMounted:!0,onClose:function(){return z(!1)}},G(O,j+1).map((function(e){return r.a.createElement(Ce.a,{key:e,selected:e===o.getDate(),onClick:function(){g(e),z(!1)}},e," ",s("Timetable.to")," ",(e+6)%B(j))}))),r.a.createElement(Se.a,{open:F,anchorEl:S.current,keepMounted:!0,onClose:function(){return q(!1)}},ce()(Array(12).keys()).map((function(e){return r.a.createElement(Ce.a,{key:e,selected:e===o.getMonth(),onClick:function(){E(e),q(!1)}},Xe(new Date(0,e).toLocaleDateString("default",{month:"long"})))}))),r.a.createElement(Se.a,{open:N,anchorEl:C.current,keepMounted:!0,onClose:function(){return R(!1)}},ce()(Array(30).keys()).map((function(e){return r.a.createElement(Ce.a,{key:e,selected:o.getFullYear()+e-10===o.getFullYear(),onClick:function(){w(o.getFullYear()+e-10),R(!1)}},o.getFullYear()+e-10)}))))},Ze=function(e,t){var a=t-e,n=Math.floor(a/36e5),r=Math.floor(a%36e5/6e4);return n?"".concat(n,"h ").concat(r,"min"):"".concat(r,"min")};function et(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function tt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?et(Object(a),!0).forEach((function(t){me()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):et(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var at=function(e){var t=e.color,a=e.style;return r.a.createElement("div",{style:tt(tt({},a),{},{minWidth:"4px",backgroundColor:t||"#888"}),className:"u-flex u-flex-items-center u-flex-justify-center u-h-3 u-bdrs-4"})},nt=function(e){var t=e.course,a=Object(L.o)(),n=Object(m.useI18n)().t;return r.a.createElement(ve.default,{key:t._id,button:!0,onClick:function(){a("/timetable/course/".concat(t._id))},disabled:"CANCELLED"==t.status,style:{height:92,borderRadius:8}},r.a.createElement(at,{color:_e(t.subject)}),r.a.createElement($.default,{primary:r.a.createElement(r.a.Fragment,null,"CANCELLED"!==t.status?r.a.createElement("div",{style:{display:"flex",gap:"4px",alignItems:"center"}},r.a.createElement(J.default,{variant:"subtitle2",color:"textPrimary",noWrap:!0},new Date(t.start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," "),r.a.createElement(J.default,{variant:"body2",color:"textSecondary",noWrap:!0,style:{fontWeight:400,fontSize:12}},"| ",Ze(new Date(t.start),new Date(t.end)))):r.a.createElement(J.default,{variant:"subtitle2",color:"error",noWrap:!0},n("Timetable.cancelled")),r.a.createElement(J.default,{variant:"h6",color:"textPrimary",noWrap:!0},ye(t.subject).pretty)),secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(J.default,{variant:"body2",color:"textSecondary",noWrap:!0},t.location),r.a.createElement(J.default,{variant:"body2",color:"textSecondary",noWrap:!0},t.organizer))}))},rt=function(e){var t=e.end,a=e.start,n=Object(m.useI18n)().t,i=Ze(t,a),l=t.getHours()>11&&a.getHours()<14;return r.a.createElement(ve.default,{button:!0,style:{backgroundColor:"var(--secondaryBackground)",height:92,borderRadius:8,marginLeft:4,marginRight:4,width:"calc(100% - 8px)"}},r.a.createElement(at,{color:"var(--secondaryColor)",style:{opacity:.3,marginLeft:-4}}),r.a.createElement($.default,{primary:n(l?"Timetable.pauseMidday":"Timetable.pauseNoCourses"),secondary:"".concat(n("Timetable.during")," ").concat(i)}))},it=function(e){var t,a,n,i,l,o=e.day,c=e.timetable,s=e.index,d=Object(m.useI18n)().t,f=Object(u.default)().isMobile,p=null!==(t=null===(a=null!==(n=c.find((function(e){return e.date===o.toISOString()})))&&void 0!==n?n:{courses:[]})||void 0===a?void 0:a.courses)&&void 0!==t?t:[];return r.a.createElement("div",{key:o.toISOString(),style:{overflowX:"hidden"},className:"u-flex u-flex-column u-w-100 u-h-100"},r.a.createElement(ue.default,null,r.a.createElement(Oe.a,{style:f?{borderRadius:0}:{borderTopLeftRadius:0===s?8:0,borderBottomLeftRadius:0===s?8:0,borderTopRightRadius:4===s?8:0,borderBottomRightRadius:4===s?8:0}},o.toLocaleDateString("default",{weekday:"long",day:"2-digit"})),p.map((function(e,t){return r.a.createElement("div",{key:e._id,style:{margin:f?"-4px 4px":"0"}},r.a.createElement(nt,{course:e,key:e._id}),p[t+1]&&new Date(e.end).getTime()+36e5<new Date(p[t+1].start).getTime()&&r.a.createElement(rt,{end:new Date(e.end),start:new Date(p[t+1].start)}))})),0===(null===(i=null!==(l=c.find((function(e){return e.date===o.toISOString()})))&&void 0!==l?l:{courses:[]})||void 0===i?void 0:i.courses.length)&&r.a.createElement("div",{className:"u-flex u-flex-column u-flex-justify-center u-flex-items-center u-p-1 u-w-100"},r.a.createElement(J.default,{variant:"body2",color:"textSecondary"},d("Timetable.noCourses")))))};function lt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ot(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(a),!0).forEach((function(t){me()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ct=function(){var e,t=Object(m.useI18n)().t,a=Object(u.default)().isMobile,i=h().currentAccount,o=Object(n.useState)(new Date),c=y()(o,2),s=c[0],d=c[1];Object(n.useEffect)((function(){var e=new Date(s);e.setDate(e.getDate()-(e.getDay()-1)),e.setHours(0,0,0,0),e.getDate()!==s.getDate()&&d(new Date(e))}),[s]);var f,p,b,v=Object(n.useMemo)((function(){var e=new Date(s);return e.setDate(e.getDate()+6),e}),[s]),j={definition:function(){return Object(l.Q)("io.cozy.calendar.events").where({start:b?{$lte:b,$gte:p}:{$gte:p},cozyMetadata:{sourceAccountIdentifier:f}}).indexFields(["cozyMetadata.sourceAccountIdentifier","start"])},options:{as:"io.cozy.calendar.events/account/"+(f=null==i||null===(e=i.cozyMetadata)||void 0===e?void 0:e.sourceAccountIdentifier)+"/start/"+(p=s)+"/end/"+(b=v),fetchPolicy:g}},E=Object(l.useQuery)(j.definition,j.options),x=E.data,_=E.fetchStatus,O=Object(n.useMemo)((function(){return ce()(Array(6).keys()).map((function(e){var t=new Date(s);return t.setDate(t.getDate()+e),t.setHours(0,0,0,0),t}))}),[s]),w=Object(n.useMemo)((function(){return(null!=x?x:[]).reduce((function(e,t){var a=new Date(t.start);a.setHours(0,0,0,0);var n=a.toISOString();return e.find((function(e){return e.date===n}))?e.map((function(e){return e.date===n?ot(ot({},e),{},{courses:[].concat(ce()(e.courses),[t])}):e})):[].concat(ce()(e),[{date:a.toISOString(),courses:[t]}])}),[])}),[x]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.b,null),r.a.createElement("div",null,r.a.createElement(ze,{title:t("Timetable.title")},r.a.createElement(Ke,{date:s,onDateChange:function(e){return d(e)},textVariant:"subtitle1"})),0!==w.length?r.a.createElement("div",{style:{flexDirection:a?"column":"row",padding:a?"0":"0 16px",marginTop:-8},className:"u-flex u-w-100 u-h-100"},(null!=O?O:[]).map((function(e,t){return 6!==e.getDay()||w.find((function(t){return t.date===e.toISOString()}))?r.a.createElement(it,{day:e,index:t,timetable:w,key:e.toISOString()}):null}))):r.a.createElement("div",{className:"u-flex u-flex-column u-flex-justify-center u-flex-items-center u-p-1 u-w-100 u-h-100"},"loading"===_?r.a.createElement(Y.a,null):r.a.createElement(J.default,{variant:"h6",color:"textSecondary"},t("Timetable.noCourses")))))},st=a("tRUj"),ut=a("PfmE"),dt=a("KsnS"),mt=a("LFaT"),ft=a("XAJ7"),pt=function(e){var t=e.subject,a=e.date;return r.a.createElement("div",{style:{gap:16},className:"u-flex u-flex-items-center"},r.a.createElement(J.default,{variant:"h3"},t&&(ye(t).emoji||"ðŸ“š")),r.a.createElement("div",null,r.a.createElement(J.default,{variant:"h6"},t&&ye(t).pretty),a&&r.a.createElement(J.default,{variant:"subtitle2",color:"textSecondary"},new Date(a).toLocaleDateString("default",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))))},bt=function(){var e,t,a,n,i=Object(L.q)().courseId,o=Object(L.o)(),c={definition:function(){return Object(l.Q)("io.cozy.calendar.events").getById(n)},options:{as:"io.cozy.calendar.events/"+(n=i),fetchPolicy:g,singleDocData:!0}},s=Object(l.useQuery)(c.definition,c.options).data,u=Object(m.useI18n)().t,d=s?[{title:u("Timetable.start"),subtitle:new Date(s.start).toLocaleTimeString("default",{hour:"2-digit",minute:"2-digit"}),icon:Ae.a},{title:u("Timetable.end"),subtitle:new Date(s.end).toLocaleTimeString("default",{hour:"2-digit",minute:"2-digit"}),icon:ut.a}]:[],f=s?[{title:u("Timetable.location"),subtitle:null!==(e=s.location)&&void 0!==e?e:"Non dÃ©fini",icon:ft.default},{title:u("Timetable.teacher"),subtitle:null!==(t=s.organizer)&&void 0!==t?t:"Non dÃ©fini",icon:mt.a},{title:u("Timetable.status"),subtitle:"CONFIRMED"==(null!==(a=s.status)&&void 0!==a?a:"")?"Maintenu":"Non maintenu",icon:dt.a}]:[];return r.a.createElement(st.a,{open:!0,disableGutters:!0,onClose:function(){return o("..",{replace:!0})},title:r.a.createElement(pt,{subject:null==s?void 0:s.subject,date:null==s?void 0:s.start}),content:r.a.createElement("div",null,r.a.createElement(ue.default,null,r.a.createElement(Oe.a,null,u("Timetable.duration")),d.map((function(e,t){return r.a.createElement(ve.default,{key:t},r.a.createElement(he.default,null,e.icon&&r.a.createElement(Fe.default,{icon:e.icon})),r.a.createElement($.default,{primary:e.title,secondary:e.subtitle}))}))),r.a.createElement(ue.default,null,r.a.createElement(Oe.a,null,u("Timetable.informations")),f.map((function(e,t){return r.a.createElement(ve.default,{key:t},r.a.createElement(he.default,null,e.icon&&r.a.createElement(Fe.default,{icon:e.icon})),r.a.createElement($.default,{primary:e.title,secondary:e.subtitle}))}))))})},yt=a("YJvl"),gt=a("iSyh"),vt=a("fzn7"),ht=a("mfku"),jt=a("dJzJ"),Et=function(){var e,t=Object(m.useI18n)().t,a=Object(L.q)(),n=a.subjectId,i=a.gradeId,o=Object(L.o)(),c={definition:function(){return Object(l.Q)("io.cozy.timeseries.grades").getById(e)},options:{as:"io.cozy.timeseries.grades/"+(e=n),fetchPolicy:g,singleDocData:!0}},s=Object(l.useQuery)(c.definition,c.options).data,u=s&&s.series.find((function(e){return e.id===i})),d=u?[{primary:t("Grades.values.student.title"),secondary:t("Grades.values.student.description"),value:"".concat(parseFloat(u.value.student).toFixed(2)),icon:N.a,important:!0},{primary:t("Grades.values.class.title"),secondary:t("Grades.values.class.description"),value:"".concat(parseFloat(u.value.classAverage).toFixed(2)),icon:jt.a},u.value.classMax>=0&&{primary:t("Grades.values.max.title"),secondary:t("Grades.values.max.description"),value:"".concat(parseFloat(u.value.classMax).toFixed(2)),icon:gt.a},u.value.classMin>=0&&{primary:t("Grades.values.min.title"),secondary:t("Grades.values.min.description"),value:"".concat(parseFloat(u.value.classMin).toFixed(2)),icon:vt.a}]:[];return r.a.createElement(st.a,{open:!0,onClose:function(){return o("..",{replace:!0})},disableGutters:!0,title:r.a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"2px"}},r.a.createElement(yt.a,null,r.a.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},r.a.createElement(J.default,{variant:"h5",style:{width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",border:"1px solid var(--secondaryColorLightest)"}},s&&(ye(s.subject).emoji||"ðŸ“š")),r.a.createElement(J.default,{variant:"subtitle1",color:"textSecondary"},s&&(ye(s.subject).pretty||"Aucune matiÃ¨re"))),r.a.createElement(J.default,{variant:"subtitle1",color:"textPrimary"},u&&(u.label||"Note sans titre"))),r.a.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},r.a.createElement(J.default,{variant:"h2",color:"textPrimary"},u&&parseFloat(u.value.student).toFixed(2)),r.a.createElement(J.default,{variant:"body1",color:"textSecondary",style:{marginBottom:"2px"}},"/",u&&u.value.outOf))),content:r.a.createElement("div",null,r.a.createElement(ue.default,{subheader:r.a.createElement(Oe.a,null,t("Grades.dialogContext"))},r.a.createElement(ve.default,null,r.a.createElement(he.default,null,r.a.createElement(Fe.default,{icon:A.a})),r.a.createElement($.default,{primary:t("Grades.date"),secondary:u&&new Date(u.date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})})),r.a.createElement(ge.a,{component:"li",variant:"inset"}),r.a.createElement(ve.default,null,r.a.createElement(he.default,null,r.a.createElement(Fe.default,{icon:ht.a})),r.a.createElement($.default,{primary:t("Grades.values.coefficient.title"),secondary:t("Grades.values.coefficient.description")}),r.a.createElement("div",{className:"cozy-grade-chip",style:{display:"flex",alignItems:"flex-end"}},r.a.createElement(J.default,{variant:"body2",color:"textSecondary"},"x"),r.a.createElement(J.default,{variant:"body1",color:"textPrimary",style:{fontWeight:"bold"}},u&&parseFloat(u.value.coef).toFixed(2))))),r.a.createElement(ue.default,{subheader:r.a.createElement(Oe.a,null,t("Grades.valuesList"))},d.map((function(e,t){return e&&r.a.createElement("div",{key:t},r.a.createElement(ve.default,null,r.a.createElement(he.default,null,r.a.createElement(Fe.default,{icon:e.icon})),r.a.createElement($.default,{primary:r.a.createElement(J.default,{variant:"body1",style:{fontWeight:e.important?"bold":"normal"}},e.primary),secondary:e.secondary}),r.a.createElement("div",{className:"cozy-grade-chip",style:{display:"flex",alignItems:"flex-end"}},r.a.createElement(J.default,{variant:"body1",color:"textPrimary",style:{fontWeight:e.important?"bold":"normal"}},parseFloat(e.value).toFixed(2)),r.a.createElement(J.default,{variant:"body2",color:"textSecondary"},"/",parseFloat(u.value.outOf).toFixed(0)))),t!==d.filter(Boolean).length-1&&r.a.createElement(ge.a,{component:"li",variant:"inset"}))}))))})},xt=function(){var e,t,a,n=Object(L.q)().homeworkId,i=Object(L.o)(),o={definition:function(){return Object(l.Q)("io.cozy.calendar.todos").getById(a)},options:{as:"io.cozy.calendar.todos/"+(a=n),fetchPolicy:g,singleDocData:!0}},c=Object(l.useQuery)(o.definition,o.options).data,s=(null==c?void 0:c.dueDate)&&(null==c||null===(e=c.dueDate)||void 0===e?void 0:e.replace(/(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2})Z/,"$1-$2-$3T$4:$5:$6Z"));return r.a.createElement(st.a,{open:!0,onClose:function(){return i("..",{replace:!0})},title:r.a.createElement(pt,{subject:null==c?void 0:c.subject,date:s}),content:null!==(t=null==c?void 0:c.summary)&&void 0!==t?t:""})},_t=[{path:"",element:r.a.createElement(le,null),children:[{path:"timetable",element:r.a.createElement(ct,null),children:[{path:"course/:courseId",element:r.a.createElement(bt,null)}]},{path:"homeworks",element:r.a.createElement(Qe,null),children:[{path:"homework/:homeworkId",element:r.a.createElement(xt,null)}]},{path:"grades",element:r.a.createElement(Le,null),children:[{path:"grade/:subjectId/:gradeId",element:r.a.createElement(Et,null)}]},{path:"presence",element:r.a.createElement(Be,null)},{path:"",element:r.a.createElement(L.a,{replace:!0,to:"/timetable"})}]}],Ot=function(){var e=Object(I.b)(_t);return r.a.createElement(I.a,{router:e})},wt=a("BoVd"),Dt=a.n(wt);document.addEventListener("DOMContentLoaded",(function(){var e,t,a,n,i;e=z(),t=e.root,a=e.client,n=e.lang,i=e.polyglot,t.render(r.a.createElement(x,{client:a,lang:n,polyglot:i},r.a.createElement(Ot,null),C()("debug")&&r.a.createElement(Dt.a,null)))}))},vaJB:function(e,t){e.exports="/img/pronote.93e57ca9d57ae065311dcae0a35e62a4.svg"},zsXZ:function(e,t){e.exports="/img/import-school.7e60fa0f81601afae8d4a65b1b48a175.svg"}});